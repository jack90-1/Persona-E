[
    {
        "name": "DeathSaar",
        "trigger": "unit_death",
        "level_nid": "5",
        "condition": "unit.nid == \"Saar\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Saar;Left",
            "speak;Saar;Emperor Vigarde...{br}Glory to His...Majesty...",
            "expression;Saar;CloseEyes",
            "remove_portrait;Saar"
        ],
        "nid": "5 DeathSaar"
    },
    {
        "name": "Defeat Boss",
        "trigger": "combat_end",
        "level_nid": "5",
        "condition": "game.check_dead(\"Saar\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "5 Defeat Boss"
    },
    {
        "name": "FightSaar",
        "trigger": "combat_start",
        "level_nid": "5",
        "condition": "unit.nid == \"Saar\" or unit2.nid == \"Saar\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Saar;Left",
            "speak;Saar;Enemy of the empire!{br}Death's too good for you!",
            "remove_portrait;Saar"
        ],
        "nid": "5 FightSaar"
    },
    {
        "name": "Seize",
        "trigger": "Seize",
        "level_nid": "3",
        "condition": "'Lord' in unit.tags",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "3 Seize"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Setup",
            "game_var;_convoy;True",
            "add_talk;Eirika;Ross",
            "add_talk;Ross;Garcia",
            "show_layer;PrevVillage;immediate",
            "remove_group;Bandits1;immediate",
            "remove_unit;Vanessa;immediate",
            "remove_group;BlueTeam;immediate",
            "remove_group;RossGarcia;immediate",
            "remove_group;BanditReinforcements;immediate",
            "# Money making",
            "change_background;Bedroom",
            "transition;Open",
            "give_money;5000",
            "transition;Close",
            "# Show chapter title",
            "chapter_title",
            "change_background;Clearing",
            "transition;Open",
            "add_portrait;Eirika;Left;no_block",
            "add_portrait;Vanessa;FarRight;no_block",
            "add_portrait;Moulder;MidRight",
            "speak;Eirika;Seth has mapped out a route for us.|We'll travel south of Renais and pass through Serafew into Grado territory.",
            "speak;Moulder;Hmm...{br}That would seem a sensible plan.|Assuming, of course, that we can avoid any run-ins with Grado soldiers...",
            "speak;Vanessa;Princess Eirika, may I have your leave to scout ahead?|From the sky, I'll have a better chance of spotting any nearby troops.",
            "speak;Moulder;We're yours to command, Your Higness. Will you give your permission?",
            "speak;Eirika;Yes, of course.|Keep an eye out for enemy bowmen though, Vanessa.",
            "speak;Vanessa;Yes, Your Higness, I shall.|I shall prove myself worthy of the honor of your trust.",
            "remove_portrait;Vanessa",
            "speak;Eirika;She seems very...sincere.",
            "speak;Moulder;Sincere... Yes, quite.",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Moulder",
            "transition;Close",
            "end_skip",
            "change_background",
            "# Transition to Bandit conversation",
            "transition;Open",
            "add_unit;Vanessa;1,0;immediate",
            "move_unit;Vanessa;7,4",
            "add_group;Bandits1;14,8;immediate;stack",
            "move_group;Bandits1;Bandits1;no_follow",
            "flicker_cursor;Bone",
            "add_portrait;Bone;MidRight",
            "speak;Bone;Hey, boss! We've found more villages ripe for the picking.",
            "add_portrait;Bazba;FarLeft",
            "speak;Bazba;One, two, three...{br}Ha ha ha! I love a good war!|With all those soldiers preoccupied, we're free to pillage as we please!|Right, Bone--you're in charge.|Grab everything that's not nailed down and bring it to the hideout.",
            "speak;Bone;I'm on it.",
            "multi_remove_portrait;Bazba;Bone",
            "move_unit;BoneBuddy;14,10;no_follow",
            "remove_unit;BoneBuddy;immediate",
            "# Transition to Ross and Garcia conversation",
            "flicker_cursor;12,3",
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Garcia;Right;no_block",
            "add_portrait;Ross;FarLeft",
            "move_portrait;Ross;Left",
            "speak;Ross;Dad!{br}Bandits approaching!",
            "speak;Garcia;Hmmm...|I'm getting you out of here, Ross. You stay close to me!",
            "transition;Close",
            "# Transition to Bone leaving and TopBandit destroying the village",
            "change_background",
            "transition;Open",
            "flicker_cursor;Bone",
            "add_portrait;Bone;Right",
            "speak;Bone;Let's start with that village there! Go to it, boys! It's all yours.|Cut down anyone fool enough to get in your way.|I'm heading west around the mountains to the other villages.",
            "remove_portrait;Bone",
            "end_skip",
            "move_unit;Bone;9,10;no_follow",
            "remove_unit;Bone;immediate",
            "move_unit;TopBandit;12,3",
            "hide_layer;PrevVillage",
            "sound;ItemBreak",
            "alert;The village was destroyed.",
            "add_group;RossGarcia;12,3;immediate;stack",
            "move_group;RossGarcia;Starting",
            "flicker_cursor;Ross",
            "transition;Close",
            "change_background;Forest",
            "transition;Open",
            "add_portrait;Ross;Left;no_block",
            "add_portrait;Garcia;Right",
            "bop_portrait;Ross",
            "speak;Ross;Unnnng!",
            "speak;Garcia;Ross? What is it? What's wrong?",
            "expression;Ross;Smile",
            "speak;Ross;It's nothing! It's just a scratch!|You're a warrior, Dad, and I am your son. I won't be beaten so easily.",
            "expression;Ross;NoSmile",
            "speak;Garcia;Don't risk yourself so foolishly...{br}We need to get you some help.|Please! Someone help my son!",
            "transition;Close",
            "change_background",
            "transition;Open",
            "add_group;BlueTeam;0,0;immediate;stack",
            "move_group;BlueTeam;Starting",
            "end_skip",
            "flicker_cursor;Vanessa",
            "add_portrait;Vanessa;FarLeft",
            "speak;Vanessa;Ah! This looks serious.|I must report back to Priness Eirika at once.",
            "remove_portrait;Vanessa",
            "move_unit;Vanessa;2,3",
            "flicker_cursor;Vanessa",
            "add_portrait;Vanessa;OffscreenRight;immediate",
            "add_portrait;Eirika;Left",
            "move_portrait;Vanessa;MidRight",
            "speak;Vanessa;I have bad news.|The village to the east is under attack by bandits.",
            "speak;Eirika;Bandits?!",
            "add_portrait;Moulder;FarRight",
            "speak;Moulder;We have arrived at our first dilemma.|We must move quickly and attract as little attention as possible, but...",
            "speak;Eirika;But I cannot stand by and watch innocents be harmed.|Vanessa, how fare the villagers?",
            "speak;Vanessa;I spotted one injured person.{br}He appeared to be just a child.",
            "speak;Eirika;Father Moulder, can your staff help him?",
            "speak;Moulder;Well, yes, I can heal his injuries with my staff, but...|I cannot do it from here. He's too far away. I must be near him.",
            "speak;Vanessa;Princess, please leave this to me.|I shall bring the boy here.",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Moulder;no_block",
            "remove_portrait;Vanessa",
            "flicker_cursor;Moulder",
            "add_portrait;Moulder;Right;no_block",
            "add_portrait;Vanessa;Left",
            "speak;Moulder;All right, Vanessa. It's up to you.",
            "speak;Vanessa;Very well. I'm off.",
            "remove_portrait;Vanessa",
            "remove_portrait;Moulder",
            "move_unit;Vanessa",
            "# Add the two enemy units back",
            "add_unit;Bone;;immediate",
            "add_unit;BoneBuddy;;immediate",
            "set_current_hp;Ross;5"
        ],
        "nid": "2 Intro"
    },
    {
        "name": "Armory",
        "trigger": "Armory",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron Sword,Slim Sword,Iron Lance,Slim Lance,Iron Axe",
            "transition;Open"
        ],
        "nid": "2 Armory"
    },
    {
        "name": "Armory",
        "trigger": "Armory",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron Sword,Slim Sword,Steel Sword,Iron Lance,Slim Lance,Steel Lance,Iron Axe,Steel Axe,Iron Bow,Steel Bow",
            "transition;Open"
        ],
        "nid": "5 Armory"
    },
    {
        "name": "Vendor",
        "trigger": "Vendor",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Heal,Vulnerary,Fire,Shine;Vendor",
            "transition;Open"
        ],
        "nid": "5 Vendor"
    },
    {
        "name": "Village1Eirika",
        "trigger": "Visit",
        "level_nid": "2",
        "condition": "region.nid == 'Village1' and unit.nid == 'Eirika'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Woman1;Left;no_block",
            "add_portrait;Selena;Right",
            "speak;Woman1;This is terrible... What are we going to do? Those bandits are so close.|If we can't find some way to protect ourselves, the village is doomed.",
            "speak;Selena;Perhaps...",
            "remove_portrait;Woman1",
            "add_portrait;Eirika;Left",
            "speak;Eirika;People, listen to me! You must close the village gates immediately.|Hurry, before the bandits arrive!",
            "speak;Selena;Who are you? You aren't from one of the neighboring towns, are you.|And your weapons give you away... You're no peasant.",
            "speak;Eirika;I am Er...|My name is Erina.{br}I'm a mercenary.",
            "speak;Selena;A mercenary named Erina, is it?|There's more to you than that, I feel. But don't worry--it's none of my affair.|I haven't told you who I am yet, have I?{br}I am Selena, a general in Grado's army.",
            "speak;Eirika;Ah!",
            "speak;Selena;Is something wrong?",
            "speak;Eirika;No...uh, nothing.",
            "speak;Selena;It looks like these villagers have some bandit troubles.|I would like to help, but I have orders...|I'm to leave for the capital immediately, and I cannot stay.|You're armed, and you claim to be a mercenary. Will you help them?",
            "speak;Eirika;Um...",
            "speak;Selena;Is there a problem?",
            "speak;Eirika;No! Of course I'll help them!|It's just... You're one of Grado's generals... Why...",
            "speak;Selena;These aren't soldiers.{br}They're people.|Should they suffer because their leaders fight?|I've petitioned your aid. Take this as payment.",
            "remove_portrait;Selena",
            "speak;Eirika;......",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "transition;Open",
            "give_item;Eirika;Red Gem",
            "has_traded;{unit}"
        ],
        "nid": "2 Village1Eirika"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "2",
        "condition": "region.nid == 'Village1' and unit.nid != 'Eirika'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;{unit};Left;no_block",
            "add_portrait;Selena;Right",
            "speak;Selena;And who are you? You don't look like one of the local peasantry.{w}{clear}As you can see, these villagers have some bandit troubles.|I would like to help, but I have orders to follow...|I am required to quit this area at once.|I would ask you to aid them in this fight.|I will pay for your trouble, of course.",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "transition;Open",
            "give_item;{unit};Red Gem",
            "has_traded;{unit}"
        ],
        "nid": "2 Village1"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;Tethys;Left",
            "speak;Tethys;Oh, hello.{br}Did you come to see me dance?|I'm sorry, but I just finished a few moments ago.{w}{clear}Oh, by the way...Would you be interested in one of these items?|A wealthy patron left me a small ransom in gifts after watching my performance.|You can sell one for gold if you'd like or use them to improve your skills.|I simply cannot carry all of this by myself, so please, take this one.|Wealth is useless if you can't use it to bring happiness to others, right?| Thanks for dropping by. Perhaps we'll meet again someday.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Dragonshield",
            "show_layer;Village1",
            "has_traded;{unit}"
        ],
        "nid": "5 Village1"
    },
    {
        "name": "Village2",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;Man2;Left",
            "speak;Man2;Life in Serafew's been harder since the Grado occupation force took over here.|Serafew's got Renais citizens as well as Grado, but it's been hardest on us.|They've singled out families from Renais for the most awful atrocities.{w}{clear}Please, traveler, take this sword.|It's an armorslayer. It'll cut through even the strongest armor.|Take it and strike down that blackheart, Saar.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Armorslayer",
            "show_layer;Village2",
            "has_traded;{unit}"
        ],
        "nid": "5 Village2"
    },
    {
        "name": "Village3",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;OldMan1;Left",
            "speak;OldMan1;In my youth, I was a knight of some renown, I'll have you know.|I've even crossed blades with one of Grado's most famous generals, I have.|Ah, but I'm an old man now...|I'm starting to worry... What if I die without passing on my techniques?|So I decided to write down what I've learned in a book. I have it here.|You seem like a strong warrior. I'd be honored if you would accept it.",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Secret Book",
            "show_layer;Village3",
            "has_traded;{unit}"
        ],
        "nid": "5 Village3"
    },
    {
        "name": "Village4",
        "trigger": "Visit",
        "level_nid": "5",
        "condition": "region.nid == 'Village4'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;Amelia;Left",
            "speak;Amelia;Hope everyone's well back home in Silva. Just a bit more, and I'll be in the empire.|Let's see, I've got vulneraries, antitoxins...|Oh! And I can't let myself forget torches for when it gets dark.|Yep! I'm all set!{br}Now I just need to get to the capital.|I'll be the finest soldier the Grado army's ever seen! I swear it!",
            "remove_portrait;Amelia",
            "add_portrait;{unit};Right",
            "speak;{unit};Hm... What's this?",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Torch",
            "show_layer;Village4",
            "has_traded;{unit}"
        ],
        "nid": "5 Village4"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "4",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;{unit};Left;no_block",
            "add_portrait;Man1;Right",
            "speak;Man1;Do you see that old snag to the south of here?|Bet it would make a handy bridge if you could knock it over.|Take a weapon to it and give it a few good whacks. That should do it.|Here, take this and give it a try.{br}It ought to do the trick.",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "transition;Open",
            "give_item;{unit};Iron Axe",
            "has_traded;{unit}"
        ],
        "nid": "4 Village1"
    },
    {
        "name": "Village2",
        "trigger": "Visit",
        "level_nid": "4",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;{unit};Right;no_block",
            "add_portrait;Lute;Left",
            "# Artur Convo",
            "if;unit.nid == 'Artur'",
            "speak;{unit};Lute, help has arrived.",
            "speak;Lute;......",
            "speak;{unit};Lute?",
            "speak;Lute;Your flesh shows no sign of putrefaction.|It seems you're not a revenant.",
            "speak;{unit};Well, I should hope not! I wanted you to know help has arrived.|Please be patient a bit longer...",
            "speak;Lute;No, no. I insist on joining you in combat.|I've been reading up on these revenants.{br}They are, quite simply, no match for me.|I am superior after all.",
            "# Eirika Convo",
            "elif;unit.nid == 'Eirika'",
            "speak;{unit};Who are you?",
            "speak;Lute;......",
            "speak;{unit};Um...",
            "speak;Lute;Your flesh shows no sign of putrefaction.|It seems you're not a revenant.",
            "speak;{unit};No, I'm not{br}Are you from around here?|There are still monsters about, so you should stay in--",
            "speak;Lute;No, no. I insist on joining you in combat.|My name is Lute. I'm a mage of superior wisdom and rare ability.|I've been reading up on these revenants.{br}They are, quite simply, no match for me.|I am superior after all.",
            "speak;{unit};What an odd girl...",
            "# Other Convo",
            "else",
            "speak;Lute;......",
            "speak;{unit};Hm?",
            "speak;Lute;Your flesh shows no sign of putrefaction.|It seems you're not a revenant.|I've decided to join you in battle now.|My name is Lute. I'm a mage of superior wisdom and rare ability.|I've been reading up on these revenants.{br}They are, quite simply, no match for me.|I am superior after all.",
            "end",
            "transition;Close",
            "show_layer;Village1",
            "change_background",
            "# Recruit Lute",
            "change_team;Lute;player",
            "add_unit;Lute;1,12;immediate;closest",
            "transition;Open",
            "has_traded;{unit}"
        ],
        "nid": "4 Village2"
    },
    {
        "name": "EirikaRossTalk",
        "trigger": "on_talk",
        "level_nid": "2",
        "condition": "unit.nid == 'Eirika' and unit2.nid == 'Ross'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Eirika;Left;no_block",
            "add_portrait;Ross;Right",
            "speak;Ross;Hey, listen! My village is being attacked by bandits.|My name's Ross.|Come on! You have to help me wipe those thugs out!",
            "speak;Eirika;All right, just... Just take a deep breath and calm down, Ross.|Leave the villages to use.{br}We'll drive off the bandits.|Seth, take the boy somewhere safe.",
            "bop_portrait;Ross",
            "speak;Ross;No! Wait! I'm going to fight, too!",
            "speak;Eirika;But...",
            "speak;Ross;My father is out there all alone, fighting those bandits.|I've got to get back to him as quickly as possible!|I'm the son of the great Garcia!|As long as I have my axe, no bandit will ever defeat me!",
            "speak;Eirika;All right, I can see you're not going to be swayed...|But you must promise you will stay close to us.",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Ross",
            "change_team;Ross;player"
        ],
        "nid": "2 EirikaRossTalk"
    },
    {
        "name": "Village2",
        "trigger": "Visit",
        "level_nid": "2",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Woman2;Right;no_block",
            "add_portrait;{unit};Left",
            "speak;Woman2;The most wonderful man rescued me.|He was dressed like a mercenary, but he had an air of elegance about him...|He gave me this elixir. I'm sure it will help you on the battlefield.",
            "transition;Close",
            "show_layer;Village2",
            "change_background",
            "transition;Open",
            "give_item;{unit};Elixir",
            "has_traded;{unit}"
        ],
        "nid": "2 Village2"
    },
    {
        "name": "Village3",
        "trigger": "Visit",
        "level_nid": "2",
        "condition": "region.nid == 'Village3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Man3;Right;no_block",
            "add_portrait;{unit};Left",
            "speak;Man3;Hm? What is it? What's all the ruckus?|What? B-bandits?!|Spread the word, everyone!{br}Close the village gates!|Thank you for your warning.{br}Please, accept this small token.",
            "transition;Close",
            "show_layer;Village3",
            "change_background",
            "transition;Open",
            "give_item;{unit};Pure Water",
            "has_traded;{unit}"
        ],
        "nid": "2 Village3"
    },
    {
        "name": "RossGarciaTalk",
        "trigger": "on_talk",
        "level_nid": "2",
        "condition": "unit.nid == 'Ross' and unit2.nid == 'Garcia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Ross;Left;no_block",
            "add_portrait;Garcia;Right",
            "bop_portrait;Ross",
            "speak;Ross;Dad!",
            "speak;Garcia;Ross?! Boy, what did I tell you!? What are you doing here?|Don't worry about me. Hurry up and get yourself to safety!",
            "speak;Ross;Did you really think I could just run away while you fight, Dad?|You taught me that fighters fight for what's important to them!|There's no way I'm leaving!{br}I'm fighting just like you!",
            "speak;Garcia;Ross...|All right, listen to me. We'll cut our way out of here together!",
            "remove_portrait;Ross;no_block",
            "remove_portrait;Garcia",
            "change_team;Garcia;player"
        ],
        "nid": "2 RossGarciaTalk"
    },
    {
        "name": "NatashaJoshuaTalk",
        "trigger": "on_talk",
        "level_nid": "5",
        "condition": "unit.nid == 'Natasha' and unit2.nid == 'Joshua'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Natasha;Left;no_block",
            "add_portrait;Joshua;Right",
            "speak;Natasha;You...You're that man I met...|Are you here to capture me? You've been hired to silence me, haven't you...",
            "speak;Joshua;Yeah, Grado's paying the bill.{br}They want you dead, you know?|But don't feel bad. It's not personal.",
            "speak;Natasha;Wait, please...|It doesn't matter what happens to me, but you must hear my words.|The emperor of Grado is changed.{br}He is not the man he once was.|The other nations must be warned before he extinguishes all light from out lands.",
            "speak;Joshua;Hey, no offense, but I'm just a mercenary. I don't care about Grado or its emperor.|Everything you say may be true, or it may be lies. I don't care either way.",
            "speak;Natasha;But that's...",
            "speak;Joshua;Even so...Killing a beautiful lady like you would leave a bad taste in my mouth.{w}{clear}Tell me, do you like to gamble?",
            "speak;Natasha;What?!",
            "speak;Joshua;Gambling's what I live for. Even when I lose, I never want to stop.|Let's have us a little wager.{br}If you win, I'll believe you.|Heads or tails, you call it.",
            "speak;Natasha;You can't...{br}This is no time for games...",
            "speak;Joshua;Would you rather I get on with the job I was hired for?",
            "speak;Natasha;......{br}Um, heads...|No! Tails!",
            "speak;Joshua;All right. So I'm heads, and you're tails.|Here we go.|... ... ...",
            "speak;Natasha;......{br}Which...Which is it?",
            "speak;Joshua;What do you know?!{w}{clear}It's tails. You win. Figures. I haven't won anything all day.|Well, Lady Luck has spoken.{br}Guess I'm on your side now.",
            "speak;Natasha;Are you serious?",
            "speak;Joshua;Yeah. Sure, I might cheat, but I never worm out of a bet. It's a rule of mine.",
            "speak;Natasha;Oh, thank heaven! Thank you, blessed light, for your protection!",
            "speak;Joshua;I got nothing against heaven, but I'm right here if you want someone to thank...|No? Well, get behind me then. I've got to take care of these fools.",
            "remove_portrait;Natasha;no_block",
            "remove_portrait;Joshua",
            "change_team;Joshua;player"
        ],
        "nid": "5 NatashaJoshuaTalk"
    },
    {
        "name": "Turn3",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;1,9",
            "spawn_group;BanditReinforcements;West;BanditReinforcements"
        ],
        "nid": "2 Turn3"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# On enemy's second turn, they start moving",
            "change_ai;104;PursueVillage",
            "change_ai;105;Pursue",
            "change_ai;BoneBuddy;PursueVillage",
            "change_ai;TopBandit;PursueVillage"
        ],
        "nid": "2 Turn2"
    },
    {
        "name": "FightBone",
        "trigger": "combat_start",
        "level_nid": "2",
        "condition": "(unit.nid == \"Bone\" and unit2.team == 'player') or (unit2.nid == \"Bone\" and unit.team == 'player')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bone;Left",
            "speak;Bone;Wait a minute!{br}Wh-who are you?",
            "remove_portrait;Bone"
        ],
        "nid": "2 FightBone"
    },
    {
        "name": "DeathBone",
        "trigger": "unit_death",
        "level_nid": "2",
        "condition": "unit.nid == \"Bone\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bone;Left",
            "speak;Bone;Urgh... Blast...",
            "remove_portrait;Bone"
        ],
        "nid": "2 DeathBone"
    },
    {
        "name": "DeathBazba",
        "trigger": "unit_death",
        "level_nid": "3",
        "condition": "unit.nid == \"Bazba\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bazba;Left",
            "speak;Bazba;I'm the...mighty...Bazba...{br}This...ain't--",
            "remove_portrait;Bazba"
        ],
        "nid": "3 DeathBazba"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.check_alive(\"Garcia\") and game.check_alive(\"Ross\")",
            "transition;Close",
            "# Just in case Garcia hasn't been recruited yet",
            "change_team;Garcia;player",
            "change_team;Ross;player",
            "change_background;Clearing",
            "transition;Open",
            "add_portrait;Seth;MidLeft;no_block",
            "add_portrait;Eirika;FarLeft;no_block",
            "add_portrait;Garcia;Right",
            "speak;Garcia;You saved my son.{br}I owe you my thanks.",
            "speak;Eirika;It's not necessary...",
            "speak;Seth;...Hold on a moment...|Aren't you...the great Garcia?{br}You fought for Renais, didn't you?;low_priority",
            "speak;Garcia;......",
            "speak;Eirika;Seth, do you know this man?",
            "speak;Seth;He was a troop commander for Renais until around ten years ago.|When I was a recruit, the soldiers used to tell so many tales about him.|They called him a daring and fearless fighter for Renais.{w}{clear}Master Garcia, you must know the peril our homeland faces right now...|Can we impose upon you to lend your strength to Renais once again?;low_priority",
            "speak;Garcia;...I'm sorry. I'm retired now.|I'm not a soldier anymore. It's... a decision I made long ago.",
            "speak;Seth;Master Garcia...;low_priority",
            "speak;Garcia;...When I was a soldier, I lived my life fighting for my country's honor.|I left no time for my family.|I spent my life fighting for faceless, uncaring nobles.{w}{clear}When my wife fell ill and died, I met the child she had left behind...|At that moment, I finally     realized what my duty had cost me.",
            "speak;Eirika;......",
            "speak;Garcia;I stood at my wife's grave and promised her I would be a father to our son.|I'm done with armies. I'm done with fighting, except to protect my son.|I've no regrets. I'm the boy's father.",
            "speak;Seth;......;low_priority",
            "speak;Seth;Princess, are you injured?",
            "remove_portrait;Eirika",
            "remove_portrait;Seth",
            "add_portrait;Ross;OffscreenLeft;immediate",
            "move_portrait;Ross;Left",
            "speak;Ross;You...you blasted fool!|Father, what's all this nonsense I'm hearing?",
            "speak;Garcia;Ross!",
            "speak;Ross;If you're not going, then I will!|I'm a fighter!{br}I know I can do this!",
            "move_portrait;Garcia;MidRight",
            "speak;Garcia;Ross, what are you saying?{br}I...",
            "speak;Ross;Dad, please! Listen to me!|I respect you more than any other man in the world.|I know you gave up being a soldier for me. I know that!|But how can you throw away such a big part of yourself?|You're a warrior at heart! You can't give that up and be happy!",
            "speak;Garcia;......",
            "speak;Ross;Look at me, Dad!{br}Have you seen me fight?|I'm not a child anymore.{br}I'm a warrior, like you.|You're free to worry, but I can survive on my own.",
            "speak;Garcia;...Ross.",
            "bop_portrait;Ross",
            "speak;Ross;You want to challenge me, Father?|I'm a fighter! The best in all of Ide!|I'm not going to lose to you!{br}I'm not going to lose to anyone!",
            "expression;Ross;Smile",
            "expression;Garcia;Smile",
            "speak;Garcia;...You're right.|You're a good soldier, Ross.",
            "remove_portrait;Ross",
            "add_portrait;Eirika;MidLeft;no_block",
            "add_portrait;Seth;FarLeft",
            "speak;Garcia;Sir Seth...|If these old bones of mine can still serve, I'd like to join you.",
            "add_portrait;Ross;FarRight",
            "speak;Ross;Dad...",
            "speak;Garcia;Looks like my boy grew up while I wasn't looking...|He's tougher than I thought. He doesn't need my help.|I've raised him as best I could, but he's right.|I've nothing to fear. I should fight. I will fight.",
            "speak;Ross;Dad!",
            "remove_portrait;Ross;no_block",
            "remove_portrait;Garcia;no_block",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "# If either die, they don't join your party",
            "else",
            "change_team;Garcia;other",
            "change_team;Ross;other",
            "end",
            "transition;Close",
            "change_background;TownSunset",
            "transition;Open",
            "add_portrait;Eirika;Left;no_block",
            "add_portrait;Man2;Right",
            "speak;Man2;Thank you so much for your help. Please stay the night and rest...",
            "speak;Eirika;We would if we could, but we have much to do and far to travel.|Your safety is reward enough.",
            "speak;Man2;Ah, well...|My, that is a splendid bracelet you're wearing.",
            "speak;Eirika;Thank you. My father gave this to me.",
            "speak;Man2;It's a wonderful gift.|But you should be careful, wearing such a valuable item so openly.|Since Renais was invaded, things have become so dangerous around here.|There are gold-hungry thieves and bandits everywhere.{w}{clear}The most wicked ae Bazba's Bandits. They are...cruel beyond words.|If you have something they want, your life is worth less than nothing.|Just the other day they assaulted some travelers and... Oh, it was awful.",
            "speak;Eirika;I...I can't believe such things...",
            "speak;Man2;Oh, Renais is finished, mark my words.{br}The Grado Empire's stolen our future.|Our only hope against them was that Prince Ephraim would prevail, but...|Rumor has it that he's on the verge of being crushed by Grado's vast numbers.|These are dark days. Travel with care.",
            "speak;Eirika;......",
            "# Fade to night",
            "transition;Close;750",
            "change_background;ForestDark",
            "transition;Open;750",
            "add_portrait;Eirika;MidLeft",
            "speak;Eirika;Ephraim...",
            "transition;Close;2000;248,248,248",
            "change_background;CastleSepia",
            "transition;Open;2000;248,248,248",
            "location_card;3 years ago",
            "wait;2000",
            "add_portrait;EphraimSepia;Left;no_block",
            "add_portrait;EirikaSepia;Right",
            "speak;EphraimSepia;It's time to start.{br}Are you ready, Eirika?",
            "speak;EirikaSepia;Yes, Ephraim.{br}Let's begin.",
            "speak;EphraimSepia;Tell me, though: why do you want me to teach you to fight?|I thought you didn't care for violence...",
            "speak;EirikaSepia;I do not like uncivilized behaviour.|I think one can solve one's problems without fighting.|And yet...",
            "speak;EphraimSepia;And yet what?",
            "speak;EirikaSepia;I've always relied on you to protect me, Brother.|I would rather not be such a burden to you in the future.|So, I thought maybe I should learn to protect myself...",
            "speak;EphraimSepia;I'm your brother. Brothers are supposed to protect their sisters.|It's nothing for you to worry about. It's no cause for concern.",
            "speak;EirikaSepia;Yes, but...|I am your sister. Sisters are supposed to worry about their brothers.{w}{clear}So I would like to learn something of swordplay, if only a little.|And maybe, someday, I can protect you in your time of need...|So please, Ephraim.",
            "speak;EphraimSepia;All right, all right. How could I say no?|Honestly, once you get an idea into your head, that's it. I might as well give in.{w}{clear}It's agreed. I'll teach you, but I won't hold back because you're my sister.|And I want no complaining once we've starting, Eirika.",
            "speak;EirikaSepia;Complain? Me? Never!",
            "transition;Close;2000;248,248,248",
            "change_background;ForestDark",
            "transition;Open;2000;248,248,248",
            "add_portrait;Eirika;MidLeft",
            "speak;Eirika;......",
            "# Colm arrives",
            "add_portrait;Colm;OffscreenLeft;immediate",
            "move_portrait;Colm;FarLeft",
            "speak;Colm;Oops! Beg your pardon.",
            "bop_portrait;Eirika",
            "speak;Eirika;Hey!",
            "move_portrait;Colm;OffscreenRight",
            "remove_portrait;Colm;immediate",
            "wait;500",
            "add_portrait;Seth;Right",
            "speak;Seth;Princess, are you all right?",
            "speak;Eirika;Y-yes... Someone bumped into me is all. I was jarred.",
            "speak;Seth;Hm?{br}Your Higness, where is your bracelet?",
            "speak;Eirika;My bracelet?{br}It's...gone.|Where could it be?{br}Did that man--",
            "speak;Seth;I'll find him!",
            "speak;Eirika;Don't worry about it, Seth.|That bracelet was a gift from my father, but Ephraim needs our help.|I can't let sentimentality get in the way of my duty.",
            "speak;Seth;No, Princess... We must retrieve your bracelet regardless of cost.|You cannot lose it. Let's go.{br}We must hurry.",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "transition;Close;250;0,0,0"
        ],
        "nid": "2 Outro"
    },
    {
        "name": "Test",
        "trigger": "level_start",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#level_var;_fog_of_war;1",
            "#level_var;_fog_of_war_radius;3",
            "#level_var;_ai_fog_of_war_radius;5",
            "add_lore;Eirika",
            "add_base_convo;Dreams of Home",
            "add_weather;rain",
            "game_var;_supports;True",
            "#trigger_script;Trigger",
            "base;Clearing",
            "#music;Attack;2000",
            "#wait;5000",
            "#music;Armory;2000",
            "#wait;5000",
            "#music;Attack;2000",
            "#wait;5000",
            "#music;None;2000",
            "#wait;5000",
            "#music;Attack;2000",
            "#wait;5000"
        ],
        "nid": "DEBUG Test"
    },
    {
        "name": "DestroyVillage1",
        "trigger": "Destructible",
        "level_nid": "2",
        "condition": "region.nid == 'DestroyVillage1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;4,2",
            "show_layer;Ruin1",
            "wait;500"
        ],
        "nid": "2 DestroyVillage1"
    },
    {
        "name": "DestroyVillage1",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin1",
            "wait;500"
        ],
        "nid": "5 DestroyVillage1"
    },
    {
        "name": "DestroyVillage2",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin2",
            "wait;500"
        ],
        "nid": "5 DestroyVillage2"
    },
    {
        "name": "DestroyVillage3",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin3",
            "wait;500"
        ],
        "nid": "5 DestroyVillage3"
    },
    {
        "name": "DestroyVillage4",
        "trigger": "Destructible",
        "level_nid": "5",
        "condition": "region.nid == 'Village4'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;{position}",
            "show_layer;Ruin4",
            "wait;500"
        ],
        "nid": "5 DestroyVillage4"
    },
    {
        "name": "DestroyVillage2",
        "trigger": "Destructible",
        "level_nid": "2",
        "condition": "region.nid == 'DestroyVillage2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;7,2",
            "show_layer;Ruin2",
            "wait;500"
        ],
        "nid": "2 DestroyVillage2"
    },
    {
        "name": "DestroyVillage3",
        "trigger": "Destructible",
        "level_nid": "2",
        "condition": "region.nid == 'DestroyVillage3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;1,12",
            "show_layer;Ruin3",
            "wait;500"
        ],
        "nid": "2 DestroyVillage3"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "DEBUG",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_team;Bone;player",
            "game_var;EirikaSupport;True"
        ],
        "nid": "DEBUG Turn2"
    },
    {
        "name": "Armory",
        "trigger": "Armory",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "shop;{unit};Iron Sword,Slim Sword,Iron Lance,Slim Lance,Iron Axe;armory",
            "transition;Open"
        ],
        "nid": "DEBUG Armory"
    },
    {
        "name": "Rout",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "2 Rout"
    },
    {
        "name": "Rout",
        "trigger": "combat_end",
        "level_nid": "4",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "4 Rout"
    },
    {
        "name": "Rout (1)",
        "trigger": "combat_end",
        "level_nid": "DEBUG",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "DEBUG Rout (1)"
    },
    {
        "name": "Door1",
        "trigger": "Door",
        "level_nid": "DEBUG",
        "condition": "region.nid == 'Door1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "give_item;{unit};Iron Sword"
        ],
        "nid": "DEBUG Door1"
    },
    {
        "name": "Chest1",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest1",
            "give_item;{unit};Javelin"
        ],
        "nid": "3 Chest1"
    },
    {
        "name": "Chest4",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest4'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest4",
            "give_item;{unit};Iron Sword"
        ],
        "nid": "3 Chest4"
    },
    {
        "name": "Chest3",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest3",
            "give_item;{unit};Hand Axe"
        ],
        "nid": "3 Chest3"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest2",
            "give_item;{unit};Iron Lance"
        ],
        "nid": "3 Chest2"
    },
    {
        "name": "Door1",
        "trigger": "Door",
        "level_nid": "3",
        "condition": "region.nid == 'Door1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door1"
        ],
        "nid": "3 Door1"
    },
    {
        "name": "Door2",
        "trigger": "Door",
        "level_nid": "3",
        "condition": "region.nid == 'Door2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door2"
        ],
        "nid": "3 Door2"
    },
    {
        "name": "Door3",
        "trigger": "Door",
        "level_nid": "3",
        "condition": "region.nid == 'Door3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door3"
        ],
        "nid": "3 Door3"
    },
    {
        "name": "Breakable1",
        "trigger": "unit_death",
        "level_nid": "3",
        "condition": "unit.nid == 'Wall1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Breakable1"
        ],
        "nid": "3 Breakable1"
    },
    {
        "name": "Snag",
        "trigger": "unit_death",
        "level_nid": "4",
        "condition": "unit.nid == 'Snag'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Snag"
        ],
        "nid": "4 Snag"
    },
    {
        "name": "Breakable2",
        "trigger": "unit_death",
        "level_nid": "3",
        "condition": "unit.nid == 'Wall2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Breakable2"
        ],
        "nid": "3 Breakable2"
    },
    {
        "name": "Breakable3",
        "trigger": "unit_death",
        "level_nid": "3",
        "condition": "unit.nid == 'Wall3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Breakable3"
        ],
        "nid": "3 Breakable3"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_talk;Neimi;Colm",
            "remove_group;PlayerTeam;immediate",
            "# Actual dialogue content",
            "chapter_title",
            "change_background;Clearing",
            "transition;Open",
            "add_portrait;Seth;Left;no_block",
            "add_portrait;Eirika;Right",
            "speak;Seth;The local villagers tell me that Bazba's Bandits keep their lair nearby.|A few of them saw a lad matching the description of our bracelet thief.|It seems a fair guess that the youth is one of these bandits.",
            "speak;Eirika;Bandits... Here in Renais, our homeland. I had no idea...|Burning our villages... Stealing from our people with no fear of reprisal?",
            "speak;Seth;It wasn't always like this. The knights used to protect the citizenry...|However, with Renais in ruins and her army tattered, law and order are hard to find.|It doesn't look like the Grado army is interested in maintaining order here.|If nothing changes, Renais will continue this sad plunge into savagery.",
            "speak;Eirika;......",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Eirika",
            "transition;Close",
            "# New background",
            "change_background;Forest",
            "transition;Open",
            "add_portrait;Seth;FarRight;no_block",
            "add_portrait;Eirika;MidRight",
            "add_portrait;Neimi;OffscreenLeft;immediate",
            "speak;Neimi;Uh....Hello?",
            "move_portrait;Neimi;FarLeft",
            "speak;Neimi;Pardon me for asking...|but are you all some sort of...mercenary troop?",
            "move_portrait;Neimi;Left",
            "speak;Eirika;Why do you ask?",
            "move_portrait;Neimi;MidLeft",
            "speak;Neimi;P-p-please, you have to help Colm. You have to!|I told him it was too dangerous, but he wouldn't listen to me!",
            "speak;Eirika;Please, you must calm yourself. Start at the beginning, and speak slowly.",
            "speak;Neimi;All right...Sniff.|I'm Neimi.|I'm from... I used to be from a village named Lark...|Except the village is gone.",
            "speak;Eirika;Gone? What do you mean?",
            "speak;Neimi;Bazba's Bandits burned it down.{br}Only Colm and I escaped.|The other villagers...{br}The bandits attacked them and...",
            "speak;Eirika;......",
            "speak;Seth;Neimi, what are you doing here?",
            "speak;Neimi;Bazba's Bandits... They have a hideout here in these mountains.|That's where Colm...|Um, Colm's my...uh...We've known each other since we were kids.|He went to steal back something the bandits took from me...",
            "speak;Eirika;He went alone? That's a very dangerous thing...",
            "speak;Neimi;Yes, I know. Th-that's what I told him, but he wouldn't listen to me.|If I lose Colm, too, I don't know... I...I'll... sniff...",
            "speak;Eirika;Wait, please don't cry.|Don't worry. We'll find your friend and see that he's not harmed.",
            "speak;Neimi;Really? Really and truly?{br}Oh, thank you! Thank you!!!|I... I don't have much money, but.. I'll do anything to help.",
            "speak;Seth;Your Highness? What will it be?",
            "speak;Eirika;If the thief we're after has gone to the bandits' lair as well...|Well, it seems as though we share a common cause with Neimi.|She is a citizen of Renais, after all.|And isn't it our duty to defend our countrymen?|I'm only sad that we weren't here to protect her friends and neighbors...|So, yes, I feel we must help her.",
            "speak;Seth;Very well. Neimi, I trust you can lead the way?",
            "speak;Neimi;Er, yes...{br}It's this way.",
            "remove_portrait;Neimi;no_block",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Eirika",
            "transition;Close",
            "change_background",
            "end_skip",
            "transition;Open",
            "# Move player team onto map",
            "move_cursor;0,11",
            "add_group;PlayerTeam;0,11;immediate;stack",
            "move_group;PlayerTeam;Starting",
            "flicker_cursor;Neimi",
            "add_portrait;Neimi;Left;no_block",
            "add_portrait;Seth;Right",
            "speak;Neimi;Um... Is there anything I can do to help? I feel so...|When I was little I used to go hunting with my grandfather.|What I mean is I can--{br}I'm not bad with a bow.",
            "speak;Seth;Really?",
            "speak;Neimi;Uh-huh.",
            "speak;Seth;I see.|You should remain behind and protect Princess Eirika.",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Neimi",
            "transition;Close",
            "move_cursor;Bazba;immediate",
            "transition;Open",
            "flicker_cursor;Bazba",
            "add_portrait;Bazba;Right",
            "speak;Bazba;Hm. Not sure who's out there, but it looks like we've got guests.|Let's give 'em a warm welcome, lads.{br}You see a stranger, stick an axe in him!",
            "remove_portrait;Bazba"
        ],
        "nid": "3 Intro"
    },
    {
        "name": "Turn2",
        "trigger": "other_turn_change",
        "level_nid": "3",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_unit;Placeholder;immediate",
            "move_cursor;0,5",
            "add_unit;Colm;0,5",
            "flicker_cursor;Colm",
            "add_portrait;Colm;Left",
            "speak;Colm;And here we go!|Ha! And not a soul saw me. These bandits are easy picking.|I guess I might as well start with these chests here.",
            "move_unit;Colm;2,4"
        ],
        "nid": "3 Turn2"
    },
    {
        "name": "NeimiColmTalk",
        "trigger": "on_talk",
        "level_nid": "3",
        "condition": "unit1.nid == 'Neimi' and unit2.nid == 'Colm'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Neimi;Left;no_block",
            "add_portrait;Colm;Right",
            "speak;Neimi;C-Colm...",
            "bop_portrait;Colm",
            "speak;Colm;Neimi?!{br}What are you doing here?|I told you to wait for me, didnt I?",
            "speak;Neimi;I couldnt... Its too dangerous.|Cmon, lets go home.",
            "expression;Colm;Smile",
            "speak;Colm;We dont have a home! Dont you get it? Look, just leave everything to me.|I can take care of it in a flash, but I dont need a clumsy oaf like you tagging along.",
            "expression;Colm;NoSmile",
            "speak;Neimi;But...but...",
            "speak;Colm;Oh, this is ridiculous.|Well talk later. Dont leave my side, Neimi.",
            "speak;Neimi;I-- All right.",
            "remove_portrait;Neimi;no_block",
            "remove_portrait;Colm",
            "change_team;Colm;player"
        ],
        "nid": "3 NeimiColmTalk"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.check_alive('Neimi') and game.check_alive('Colm')",
            "# Just in case",
            "change_team;Colm;player",
            "transition;Close",
            "change_background;Ruins",
            "transition;Open",
            "add_portrait;Neimi;Left",
            "speak;Neimi;C-Colm....",
            "add_portrait;Colm;Right",
            "speak;Colm;What now? I told you not to worry.|I could've robbed these bandits blind on my own, thank you very much.",
            "speak;Neimi;I was...{br}worried...",
            "speak;Colm;H-Hold on! I'm sorry!{br}C'mon! Don't start bawling!",
            "speak;Neimi;Aaah...sniff...|No more...dangerous stuff... by yourself...",
            "speak;Colm;Fine, fine. I promise.|But you have to stop crying all the time. All right?",
            "speak;Neimi;Uh-huh...",
            "speak;Colm;Oh, yeah. Take a look at this.",
            "move_portrait;Colm;MidRight",
            "speak;Neimi;Hm?",
            "move_portrait;Neimi;MidLeft",
            "speak;Colm;I got your mirror back.|Remember how you cried when we left Lark? You thought you'd lost this.|I knew it was your mother's, and I knew those thugs had taken it.|So I went and got it back!|See what happens when you give me a job? Guaranteed results!",
            "expression;Neimi;CloseEyes",
            "speak;Neimi;Colm...|Aa...Waaah...{br}Colm...",
            "speak;Colm;Hey wh-why are you crying this time?|C'mon! Stop! Knock it off! Please, Neimi...",
            "# Seth appears",
            "add_portrait;Seth;FarLeft",
            "speak;Seth;...This is quite touching, but...|I think you'd best return Princess Eirika's bracelet to her now.",
            "remove_portrait;Neimi",
            "add_portrait;Neimi;FarRight",
            "move_portrait;Colm;MidLeft",
            "speak;Colm;Wh-what are you talking about?{br}Are you trying to say that I--",
            "move_portrait;Seth;Left",
            "bop_portrait;Colm",
            "speak;Colm;Whoa! Whoa there! Hold it! It's right here! Take it!",
            "move_portrait;Colm;MidRight",
            "speak;Seth;......|Tell me, boy, is this the path you've chosen for your life?|If this girl matters to you, you must quit this dark road.",
            "speak;Colm;Uh, yeah...Right.",
            "speak;Seth;We're leaving. Do not expect to be rescued again.|Farewell.",
            "speak;Colm;...Hey, wait!|Let us go with you. You can't just leave us here.",
            "speak;Seth;Pardon?",
            "speak;Colm;Neimi and I... We've got no home to return to.|No matter where we go, there's just gonna be more fighting.|You're mercenaries, right?{br}Well, then take us with you.|I'm a handy guy to have around. I know I can help you out.",
            "speak;Seth;I would prefer not, but I'll agree with Eirika's decision.|Our duty is a grave one however. We've no time to waste shepherding you.",
            "speak;Colm;That's fine with us.|You just wait--I promise you won't regret your decision.",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Colm;no_block",
            "remove_portrait;Neimi",
            "end_skip",
            "end",
            "transition;Close",
            "# Eirika and Seth talk",
            "change_background;CastleRuins",
            "transition;Open",
            "add_portrait;Eirika;Left;no_block",
            "add_portrait;Seth;Right",
            "speak;Seth;I retrieved your bracelet from the bandit's stronghold.|Here you are, Princess.",
            "speak;Eirika;Thank you, Seth.|You know...Father gave me this bracelet when I was a child.|It has only one match in the world, and my brother wears it.",
            "speak;Seth;Lady Eirika, you must take care never to lose that bracelet.|It is the proof that King Fado entrusted the future of Renais to you, his children.",
            "speak;Eirika;Seth...What is it you're not telling me?",
            "speak;Seth;...I apologize, Your Highness.|When the time comes, I will tell you what I know. Until then, I...",
            "speak;Eirika;I see.|If you tell me it must wait, then it can wait. I trust you.",
            "speak;Seth;Then we should get moving again.|We're safe from bandits for now, but I can't guarantee for how long.",
            "speak;Eirika;This... This is just the beginning, isn't it?|If we hope to free our homeland, it will take battle after battle...",
            "speak;Seth;I'm afraid so, Your Highness.|The day you and Prince Ephraim win back the freedom and honor of Renais will come.|But I fear it lies at the end of a long and treacherous road.",
            "speak;Eirika;I know. I must fight for that day.|In the names of all those I could not save, I'll lead us home.|Let's go. My brother awaits!",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "transition;Close;1000",
            "# Load submap",
            "end_skip",
            "change_tilemap;Grado Keep",
            "change_background",
            "transition;Open;1000",
            "location_card;Grado Keep",
            "flicker_cursor;10,4",
            "transition;Close;250",
            "change_background;GradoCastle",
            "transition;Open",
            "add_portrait;Glen;MidLeft;no_block",
            "add_portrait;Duessel;FarLeft;no_block",
            "add_portrait;Selena;Right",
            "speak;Selena;General Duessel.",
            "speak;Duessel;Selena. Have you been back long?|Tell me, how fares the campaign in Renais?",
            "speak;Selena;Signs of chaos abound.|Brigands ride without fear, and the peasant's cries fill the air.",
            "speak;Duessel;Hmm...|If Grado's troops do not enforce public order, the situation will only worsen.|And still, His Majesty has given us no orders.|Perhaps, just this once, I should take the lead...",
            "speak;Glen;What could His Majesty be thinking?|Breaking our long-held alliance with Renais--invading without warning...|He's never been this way before. He abhors violence.;low_priority",
            "speak;Selena;......",
            "speak;Glen;And have you noticed the recent promotions? Who are they are going to?|Certainly not to the soldiers who have Grado's best interests at heart.|I feel this invasion is the prelude to a much larger war.|I feel as though His Majesty is no longer the man we knew him to be.",
            "speak;Selena;Glen, it doesn't matter what any of us might think of our orders.|We are his servants, and we will not question His Majesty's intentions.",
            "speak;Glen;I know that, Selena. And yet...",
            "speak;Duessel;That's enough. Both of you. His Majesty summons us.|Let's hope we can learn a little during our audience.",
            "multi_remove_portrait;Duessel;Glen;Selena",
            "transition;Close",
            "end_skip",
            "# Load submap again",
            "change_tilemap;Chapter 14B",
            "# Load the units that are necessary to display for cutscene",
            "load_unit;Vigarde;enemy",
            "load_unit;Valter;enemy",
            "load_unit;Riev;enemy",
            "load_unit;Caellach;enemy",
            "make_generic;Glen;Wyvern Lord;1;enemy",
            "load_unit;Duessel;enemy",
            "load_unit;Selena;enemy",
            "load_unit;Lyon;enemy",
            "add_unit;Vigarde;14,2;immediate",
            "add_unit;Glen;13,5;immediate",
            "add_unit;Duessel;14,5;immediate",
            "add_unit;Selena;15,5;immediate",
            "add_unit;Lyon;15,3;immediate",
            "center_cursor;Vigarde;immediate",
            "change_background",
            "transition;Open",
            "flicker_cursor;Vigarde",
            "add_portrait;Vigarde;Left",
            "speak;Vigarde;...I appreciate your work in fulfilling your previous orders.|You are the hammers that drive the nails of the empire's will...|You will continue to operate{br}...without hesitation...|wherever I send you.",
            "add_portrait;Duessel;Right",
            "speak;Duessel;By your command.",
            "remove_portrait;Duessel",
            "add_portrait;Selena;Right",
            "speak;Selena;In Your Majesty's name.",
            "remove_portrait;Selena",
            "add_portrait;Glen;Right",
            "speak;Glen;Yes, sire...",
            "remove_portrait;Glen",
            "speak;Vigarde;...However, I know this...|You, my Imperial Three, lack the strength to conquer the remaining nations alone.|In the invasion of Renais, certain soldiers performed beyond expectation.|I have chosen them to join you as new generals in the empire's service.|...Come.",
            "remove_portrait;Vigarde",
            "end_skip",
            "# Do map stuff",
            "show_layer;TopDoor",
            "move_unit;Glen;12,5;no_block;no_follow",
            "move_unit;Selena;16,5;no_block;no_follow",
            "move_unit;Duessel;12,4;no_follow",
            "add_unit;Valter;13,11;immediate",
            "add_unit;Riev;14,11;immediate",
            "add_unit;Caellach;15,11;immediate",
            "move_unit;Valter;13,5;no_block;no_follow",
            "move_unit;Riev;14,5;no_block;no_follow",
            "move_unit;Caellach;15,5;no_follow",
            "flicker_cursor;Vigarde",
            "# Back to dialogue",
            "add_portrait;Vigarde;Left",
            "speak;Vigarde;...The performance of these men surpassed even your own.|With the addition of these three...|The empire will have six generals strong enough to conquer this land.|Do you understand?",
            "remove_portrait;Vigarde",
            "add_portrait;Riev;Right",
            "speak;Riev;Heh heh heh...|I am Riev, given the name Blood Beryl by His Majesty.|I know I am a newcomer, but I pray for your favor.",
            "add_portrait;Duessel;Left",
            "speak;Duessel;...Understood.",
            "remove_portrait;Duessel",
            "remove_portrait;Riev",
            "add_portrait;Caellach;Right",
            "speak;Caellach;I'm Caellach. I was a mercenary, fighting in the desert.|Seems I'm to be called Tiger Eye...|You're a fine lookin' lass, aren't you? Yeah, I'm gonna love working with you.",
            "add_portrait;Selena;Left",
            "speak;Selena;......",
            "remove_portrait;Selena",
            "remove_portrait;Caellach",
            "add_portrait;Valter;Right",
            "speak;Valter;So we meet again. You know me as General Valter, but you will call me the Moonstone.|I'll save you worthless dogs from your own incompetence. You'll thank me later.",
            "add_portrait;Glen;OffscreenLeft;immediate",
            "move_portrait;Glen;FarLeft",
            "speak;Glen;Valter... You scum!",
            "add_portrait;Duessel;MidLeft",
            "speak;Duessel;Peace, Glen.",
            "remove_portrait;Duessel",
            "remove_portrait;Glen",
            "remove_portrait;Valter",
            "add_portrait;Vigarde;Left",
            "speak;Vigarde;Selena. Caellach. You will bring me Frelia.",
            "add_portrait;Caellach;FarRight;no_block",
            "add_portrait;Selena;MidRight",
            "speak;Selena;Yes, sire.",
            "speak;Caellach;Sure. Good as done.",
            "remove_portrait;Selena",
            "remove_portrait;Caellach",
            "speak;Vigarde;Riev. Duessel. You are charged with the defense of the empire.|...I will speak to you individually with more details later.",
            "add_portrait;Duessel;FarRight;no_block",
            "add_portrait;Riev;MidRight",
            "speak;Riev;Heh heh heh...{br}Understood, Your Majesty.",
            "speak;Duessel;By your command, sire.",
            "remove_portrait;Duessel",
            "remove_portrait;Riev",
            "add_portrait;Valter;MidRight",
            "speak;Valter;And me?",
            "speak;Vigarde;Valter, Glen...{br}I have other duties for you...",
            "add_portrait;Glen;FarRight",
            "speak;Glen;Yes, Your Majesty?",
            "speak;Vigarde;Renais has fallen, but Princess Eirika still eludes us...|Her brother, Prince Ephraim, leads a resistance within our borders.|Bring the siblings to me.",
            "speak;Valter;Ha ha.. Of course.",
            "remove_portrait;Vigarde",
            "speak;Glen;......",
            "remove_portrait;Glen;no_block",
            "remove_portrait;Valter",
            "transition;Close"
        ],
        "nid": "3 Outro"
    },
    {
        "name": "FightBazba",
        "trigger": "combat_start",
        "level_nid": "3",
        "condition": "check_default('Bazba',['Eirika'])",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bazba;Left",
            "speak;Bazba;I'm the head of this bandit pack, the mighty Bazba!{w}{clear}Hope you've enjoyed your life, 'cuz it's about to end!",
            "remove_portrait;Bazba"
        ],
        "nid": "3 FightBazba"
    },
    {
        "name": "Eirika/Bazba",
        "trigger": "combat_start",
        "level_nid": "3",
        "condition": "check_pair('Bazba','Eirika')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Bazba;Left;no_block",
            "add_portrait;Eirika;Right",
            "speak;Bazba;Hah... You look like a pampered noble, not a soldier.|Who the heck are you supposed to be?",
            "speak;Eirika;I am Princess Eirika.|Your crimes against the people of Renais end today!",
            "speak;Bazba;You'll regret taking that tone with me.|I'm the mighty Bazba, after all!|The likes of you can hardly even scratch me.",
            "remove_portrait;Bazba;no_block",
            "remove_portrait;Eirika"
        ],
        "nid": "3 Eirika/Bazba"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Initial setup",
            "set_stats;Boss;HP,39,STR,5,SKL,1,SPD,2,LCK,2,DEF,1,RES,0;immediate",
            "add_tag;Boss;Boss",
            "remove_group;PlayerTeam;immediate",
            "remove_group;EnemyArmy;immediate",
            "remove_unit;Artur;immediate",
            "remove_unit;L'arachel;immediate",
            "remove_unit;Dozla;immediate",
            "remove_unit;Rennac;immediate",
            "# Start chapter",
            "chapter_title",
            "move_cursor;0,0;immediate",
            "transition;Open",
            "spawn_group;PlayerTeam;North;Starting",
            "flicker_cursor;Eirika",
            "# Main Script",
            "transition;Close",
            "change_background;DeepForest",
            "transition;Open",
            "add_portrait;Seth;Right;no_block",
            "add_portrait;Eirika;Left",
            "speak;Seth;We're approaching Serafew, at the border of Renais and Grado.|Once we cross, we'll be in Grado...{br}Renvall won't be much farther.",
            "speak;Eirika;That is, assuming we can cross the border without mishap...|Oh!{br}Look! Over there!",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "transition;Close",
            "change_background",
            "# Add the enemy army back to the map",
            "add_group;EnemyArmy;Starting;immediate",
            "# (Screen goes to the map, with monsters spreading everywhere)",
            "transition;Open",
            "flicker_cursor;Eirika",
            "add_portrait;Seth;Right;no_block",
            "add_portrait;Eirika;Left",
            "speak;Eirika;Those strange figures...{br}What...What are they?|Are they...human?",
            "speak;Seth;I've never seen anything like it. What could they be?",
            "remove_portrait;Eirika;no_block",
            "remove_portrait;Seth",
            "# (Screen goes to a southern village with Artur and Lute)",
            "transition;Close",
            "center_cursor;1,11;immediate",
            "transition;Open",
            "flicker_cursor;1,11",
            "transition;Close",
            "change_background;Town",
            "transition;Open",
            "add_portrait;Lute;Left;no_block",
            "add_portrait;Artur;Right",
            "speak;Artur;What have we done to deserve the trials before us? What is happening to us?|How could such abominations walk our lands while the Sacred Stones protect us?",
            "speak;Lute;......",
            "speak;Artur;Lute, please, it's dangerous outside the walls. Stay here in the village.",
            "speak;Lute;Those are revenants, aren't they?|They were the vanguard of the Demon King in the days of darkness.|The Tome of Nazania describes them in chapter 2, section 7, paragraph 8.",
            "speak;Artur;You know of them?",
            "speak;Lute;Duh! I'm a prodigy. I can recall almost everything I see or hear.|According to the book, revenants attack using razor-sharp claws.|Sounds painful, wouldn't you say?",
            "speak;Artur;Yes, er, well... Be that as it may, I must go aid those travelers outside.|You should stay here within the safety of the village.",
            "speak;Lute;Very well. I don't mind staying here. In fact, it seems the smarter choice.",
            "# (Artur leaves)",
            "remove_portrait;Artur",
            "speak;Lute;Magic is far more powerful than any monster's claws.|The thickest hide and the strongest armor are useless against magic's power.|Yes, I suppose I could have studied swords, but only magic is worthy of me.|Even if this village were to be assaulted by monsters, I could defend it perfectly.",
            "remove_portrait;Lute",
            "transition;Close",
            "change_background",
            "center_cursor;Eirika;immediate",
            "add_unit;Artur;8,10;immediate",
            "transition;Open",
            "# Artur runs up to Eirika's group",
            "move_unit;Artur;no_follow",
            "flicker_cursor;Artur",
            "add_portrait;Artur;Right;no_block",
            "add_portrait;Eirika;MidLeft",
            "speak;Artur;Travelers, you must listen to me! The ancient forest of Za'ha is dangerous.|Head south and pass through this place before the fiends surround you!",
            "speak;Eirika;Who are you?",
            "speak;Artur;My name is Artur.|The temple has assigned me the task of cleansing the forest of these...things.|There are so many of the fiends, though.{br}I wonder if I stand much chance alone.|So if you would, please flee now while you have the chance.",
            "speak;Eirika;Fiends?|You're not talking about the same fiends that served the ancient Demon King?|That can't be right... They're nothing but legends and fairy tales...",
            "speak;Artur;Yes, I felt the same way when I heard.|And yet here they are. This place is filled with them.|I wonder how far they've spread...{br}Surely they're not in Renais alone.",
            "speak;Eirika;But...why are they here? How?",
            "add_portrait;Seth;FarLeft",
            "speak;Seth;Beware, Your Highness!{br}Something approaches!",
            "multi_remove_portrait;Eirika;Seth;Artur",
            "# (A Mogall fly towards Artur)",
            "move_unit;Mogall;9,3",
            "flicker_cursor;Artur",
            "add_portrait;Artur;Left",
            "speak;Artur;Please allow me to deal with this.",
            "speak;Artur;Evil shade! May the blessed light drive you from this land!",
            "remove_portrait;Artur",
            "# (Artur slays the Mogall)",
            "interact_unit;Artur;Mogall;hit1,crit1,end",
            "flicker_cursor;Eirika",
            "add_portrait;Seth;Left",
            "speak;Seth;We ought to help. He can't fight them all alone. Do you have orders?",
            "remove_portrait;Seth",
            "# Show prep screen last",
            "end_skip",
            "prep;1",
            "flicker_cursor;Artur",
            "add_portrait;Artur;Right",
            "speak;Artur;One of my companions is in that village to the south.|If you can get there swiftly, I implore you to watch over her safety.",
            "remove_portrait;Artur"
        ],
        "nid": "4 Intro"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;14,8",
            "spawn_group;Turn2Rein;East;Turn2Rein"
        ],
        "nid": "4 Turn2"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;14,16",
            "add_group;Brigand1;Brigand1",
            "flicker_cursor;14,16",
            "add_portrait;Bandit1;FarRight",
            "speak;Bandit1;Look at this. Now's our chance!|C'mon, lads!|Let's join the fights and steal our way through this pathetic town!",
            "remove_portrait;Bandit1"
        ],
        "nid": "5 Turn2"
    },
    {
        "name": "Turn4",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 4",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;14,7",
            "add_group;Brigand2;Brigand2"
        ],
        "nid": "5 Turn4"
    },
    {
        "name": "Turn8",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;14,0",
            "add_group;Brigand3;Brigand3"
        ],
        "nid": "5 Turn8"
    },
    {
        "name": "Turn3",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;14,0",
            "add_unit;L'arachel;13,0;immediate;stack",
            "add_unit;Dozla;12,0;immediate;stack",
            "add_unit;Rennac;14,0;immediate;stack",
            "move_unit;L'arachel;;;closest;no_block",
            "move_unit;Dozla;;;closest;no_block",
            "move_unit;Rennac;;;closest",
            "wait;50",
            "flicker_cursor;L'arachel",
            "add_portrait;L'arachel;Right",
            "speak;L'arachel;Oh, my!|Those travelers are being besieged by the agents of evil!",
            "add_portrait;Dozla;MidLeft",
            "speak;Dozla;Ha ha ha! Right you are, Lady L'Arachel!",
            "speak;L'Arachel;I cannot allow this to happen!{br}Come!|We must charge down these cliffs and rush to their aid!",
            "add_portrait;Rennac;FarLeft",
            "speak;Rennac;We charge down these cliffs, and the only thing we'll be rushing to is death.|How about we find us a nice, gentle path down, hm?",
            "speak;L'arachel;Ah...Yes, well...Let us hurry nonetheless.|I simply cannot abide those wicked beasts running amok!",
            "remove_portrait;L'arachel;no_block",
            "remove_portrait;Dozla;no_block",
            "remove_portrait;Rennac",
            "remove_unit;Rennac",
            "move_unit;L'arachel;14,2;;closest;no_block",
            "move_unit;Dozla;14,1;;closest;no_block",
            "remove_unit;L'arachel",
            "remove_unit;Dozla"
        ],
        "nid": "4 Turn3"
    },
    {
        "name": "Trigger",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "any(game.level.regions.get('Trigger').contains(unit.position) for unit in game.get_units_in_party())",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;0,0",
            "add_group;RevenantRein;0,0;immediate;stack",
            "move_group;RevenantRein;RevenantRein"
        ],
        "nid": "4 Trigger"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Forest",
            "transition;Open",
            "if;game.check_alive('Artur') or game.check_alive('Lute')",
            "add_portrait;Seth;MidLeft;no_block",
            "add_portrait;Eirika;FarLeft;no_block",
            "if;game.check_dead('Artur')",
            "add_portrait;Lute;Right",
            "elif;game.check_dead('Lute')",
            "add_portrait;Artur;Right",
            "else",
            "add_portrait;Artur;MidRight;no_block",
            "add_portrait;Lute;FarRight",
            "end",
            "else",
            "add_portrait;Seth;Right;no_block",
            "add_portrait;Eirika;Left",
            "end",
            "speak;Seth;We've killed all the monsters.|Still, we'd best burn the bones to ash to be sure they don't return.;low_priority",
            "speak;Eirika;I still can't believe what we've been fighting here...|I'd thought those fiends nothing more than myth and legend.",
            "speak;Seth;Those revenants are said to be the least of the dark creatures.|And yet, the weakest of them could outmatch any normal man.|We cannot take this enemy lightly.;low_priority",
            "if;game.check_alive('Lute')",
            "speak;Lute;Oh, yes. There are much worse then those revenants and the entombed...|Let's see, there's the bonewalkers, mauthe doogs, gargoyles, baels... |Why, I'll bet you just about any creature of lore could be walking again.|Yes, we're in for some trouble. Even my fabulous power may not be enough.",
            "end",
            "if;game.check_alive('Artur')",
            "speak;Artur;O divine light, show me... Is this a sign of dark days to come?;low_priority",
            "end",
            "remove_portrait;Lute",
            "remove_portrait;Artur",
            "if;game.check_alive('Artur') or game.check_alive('Lute')",
            "remove_portrait;Seth",
            "move_portrait;Eirika;Left",
            "speak;Eirika;By all that's holy, what is happening?",
            "add_portrait;Seth;Right",
            "else",
            "speak;Eirika;By all that's holy, what is happening?",
            "end",
            "speak;Seth;Princess Eirika, perhaps it would be wise to return to Frelia and regroup.|Pressing forward seems foolish in light of recent events.|We cannot face both Grado's forces and more of those terrible things.",
            "speak;Eirika;Seth, I follow your point, and nothing would please me more then running for safety.|But what of my brother? He and his men are still trapped in the same situation we are.|I know full well that I may be leading us into even greater danger, but...|Please try to understand.",
            "speak;Seth;I do, my princess, and I vow to see you through this safely.",
            "remove_portrait;Seth;no_block",
            "remove_portrait;Eirika",
            "transition;Close",
            "change_background",
            "add_unit;Eirika;8,5;immediate",
            "add_unit;Seth;8,4;immediate",
            "transition;Open",
            "# (L'arachel and her gang rides up)",
            "# remove all units",
            "add_group;LGang;14,5;;stack",
            "move_group;LGang;LGang",
            "flicker_cursor;L'arachel",
            "transition;close",
            "change_background;Clearing",
            "transition;Open",
            "add_portrait;Eirika;Left",
            "add_portrait;L'arachel;OffscreenRight;immediate",
            "move_portrait;L'arachel;MidRight",
            "speak;L'arachel;Aha! Foul creatures, beware!|I, L'arachel, bestow upon you the honor at banishment at my blessed hands!",
            "speak;Eirika;......",
            "speak;L'arachel;Oh...Where are the monsters?",
            "speak;Eirika;Well, we just finished...",
            "speak;L'arachel;Ah, glad tidings indeed!{br}The heavens must be rejoicing!|I am...a tad disappointed however.|After all, I did rush all the way here to show you the splendor of my might.",
            "add_portrait;Dozla;FarRight",
            "speak;Dozla;Gwah ha ha! It's a real shame, innit, Lady L'Arachel?!",
            "remove_portrait;Dozla",
            "add_portrait;Rennac;FarRight",
            "speak;Rennac;What's shameful is the way you drag us around the countryside.",
            "remove_portrait;Rennac",
            "speak;Eirika;Pardon me, but...who are you?",
            "speak;L'arachel;Me?|Since you ask, please allow me to introduce myself.|It is I, the true light and glory of the sacred realm of Rausten...",
            "add_portrait;Dozla;FarRight",
            "speak;Dozla;Stop! Lady L'arachel, you mustn't continue!|You cannot reveal your true identity here!",
            "speak;L'arachel;Oh, yes, you're right. Oh, I get so careless sometimes!|Now, I must ride off in anonymity. Oh, how beautifully romantic!",
            "speak;Eirika;Uh... Right.",
            "speak;L'arachel;Fare thee well, strangers.{br}Perhaps our paths will cross again.|Come, Dozla! Rennac!{br}We ride!",
            "remove_portrait;L'arachel",
            "speak;Dozla;Gwah ha ha!{br}Let's go, Rennac!",
            "remove_portrait;Dozla",
            "add_portrait;Rennac;FarRight",
            "speak;Rennac;All right, all right.",
            "remove_portrait;Rennac",
            "# (They leave)",
            "speak;Eirika;...What was that about?"
        ],
        "nid": "4 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "change_background;Village",
            "remove_all_units",
            "add_unit;Joshua;9,6;immediate",
            "transition;Open",
            "add_portrait;Joshua;Left",
            "speak;Joshua;Well, well. There's an arena in this town.|Perfect. My pocket's feeling a bit light.",
            "speak;Joshua;Say, is that a cleric? It is!{br}And a gorgeous one at that.",
            "remove_portrait;Joshua",
            "transition;Close",
            "change_background",
            "center_cursor;9,9;immediate",
            "transition;Open",
            "# (Natasha runs past Joshua)",
            "add_unit;Natasha;9,16;immediate",
            "move_unit;Natasha;9,8",
            "move_unit;Joshua;9,7",
            "flicker_cursor;Joshua",
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Natasha;Left",
            "move_portrait;Natasha;MidRight",
            "add_portrait;Joshua;Left",
            "speak;Joshua;Something amiss, Sister?{br}You look flustered.",
            "bop_portrait;Natasha",
            "speak;Natasha;Ahhh!",
            "remove_portrait;Natasha",
            "add_portrait;Natasha;Right",
            "speak;Natasha;P-pardon me.",
            "speak;Joshua;No, pardon me! I never meant to startle you.|May I offer my apologies....",
            "speak;Natasha;No, it's not necessary...{br}It was my fault.|Excuse me, I must be going...{br}Good day to you.",
            "# (Natasha leaves)",
            "remove_portrait;Natasha",
            "speak;Joshua;...And there she goes.|Not my lucky day...{br}She was quite the beauty, too.|Ah, such is life. I think I've time still to visit the arena, though.",
            "remove_portrait;Joshua",
            "transition;Close",
            "end_skip",
            "change_background",
            "remove_all_units",
            "# (View moves north, Glen is talking to Saar)",
            "add_unit;Saar;9,7;immediate",
            "load_unit;Cormag;enemy",
            "add_unit;Cormag;8,10;immediate",
            "make_generic;Glen;Wyvern Lord;1;enemy",
            "add_unit;Glen;9,9;immediate",
            "transition;Open",
            "flicker_cursor;Glen",
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Saar;Left;no_block",
            "add_portrait;Glen;Right",
            "speak;Glen;Captain Saar of the Serafew Border Guard. How fare you?|I bring orders from His Majesty.|Rumor has it that Princess Eirika of Renais is making her way to Grado.|You are to find her and to place her in custody immediately.",
            "speak;Saar;Yes, sir!",
            "speak;Glen;One more thing...|A traitor to the empire has fled Castle Grado.|We've received reports she is hiding somewhere here in Serafew.|I don't care if you have to tear this town apart. Find the turncoat.",
            "speak;Saar;Yes, sir, General Glen!|If she resists, do we have permission to execute her?",
            "speak;Glen;...Yes. Permission granted.",
            "speak;Saar;Understood! Grado's will be done.|The Grado Empire will repay the debt of betrayal with blood!",
            "speak;Glen;...His Majesty relies upon you, Captain. Be sure his trust is not misplaced.|That is all.",
            "speak;Saar;Yes, sir!",
            "remove_portrait;Saar;no_block",
            "remove_portrait;Glen",
            "transition;Close",
            "change_background",
            "transition;Open",
            "# (Saar leaves, Cormag comes)",
            "move_unit;Saar;9,2;no_follow",
            "remove_unit;Saar;immediate",
            "move_unit;Cormag;8,9",
            "flicker_cursor;Glen",
            "transition;Close",
            "change_background;Village",
            "transition;Open",
            "add_portrait;Cormag;Left;no_block",
            "add_portrait;Glen;Right",
            "speak;Glen;Such loyalty to the crown.|If only I could hold such conviction in the righteousness of our emperor.",
            "speak;Cormag;Something troubling you, Brother?",
            "speak;Glen;No...Pay no mind to me.|Come, Cormag. Let's go.|From here, we ride northeast, back to the fort.",
            "speak;Cormag;Very well.",
            "multi_remove_portrait;Cormag;Glen",
            "transition;Close",
            "change_background",
            "transition;Open",
            "# (They fly off, replaces by Seth and Eirika, outside the town)",
            "move_unit;Glen;14,5;no_block;no_follow",
            "move_unit;Cormag;14,4;no_follow",
            "remove_unit;Glen",
            "remove_unit;Cormag",
            "transition;Close",
            "change_background;VillageGate",
            "transition;Open",
            "multi_add_portrait;Eirika;Left;Seth;Right",
            "speak;Eirika;It's been so long since I last visited Serafew.|My brother and I used to pass through here en route to Grado.|I remember the harmony in which the people of both countries lived.|No walls divided our borders. No soldiers stood guard in high towers.|The border town... It was to me a symbol of the trust between Grado and Renais.",
            "speak;Seth;...And now, it is firmly under the thumb of Grado's emperor.",
            "speak;Eirika;The peace I remember in this city...|It seems like something from another time. It seems lost now... Forever.",
            "speak;Seth;...The city doesn't seem to be very heavily patrolled.|They must feel it's not worth guarding with Castle Renais under their control.|We must try to not draw attention to ourselves. The west gate is undermanned....",
            "add_portrait;Saleh;OffscreenRight;immediate",
            "speak;Saleh;Pardon me, may I ask you a question?",
            "# (Saleh appears)",
            "remove_portrait;Seth",
            "move_portrait;Eirika;FarLeft",
            "add_portrait;Seth;MidLeft",
            "move_portrait;Saleh;Right",
            "speak;Eirika;What is it?",
            "speak;Saleh;I'm looking for someone.|Have you seen a young girl with indigo hair?",
            "speak;Eirika;Indigo hair?|No...Sorry.",
            "speak;Saleh;Hmmm...|Thank you. Sorry to intrude.",
            "# (Saleh leaves)",
            "multi_remove_portrait;Saleh;Eirika;Seth",
            "multi_add_portrait;Seth;FarLeft;Eirika;MidLeft",
            "speak;Eirika;There was something very odd about that man, wouldn't you say?",
            "speak;Seth;He did seem unusual. He didn't strike me as a Grado spy, but...",
            "add_portrait;SoldierRed;OffscreenRight;immediate",
            "speak;SoldierRed;Catch her! Don't let her escape!",
            "speak;SoldierRed;That way! She went that way!",
            "speak;Eirika;What's that?",
            "speak;Seth;It's coming from over there.",
            "speak;Eirika;Let's see what the commotion is.",
            "multi_remove_portrait;Seth;Eirika",
            "transition;Close",
            "end_skip",
            "change_background",
            "remove_all_units",
            "transition;Open",
            "add_unit;Natasha;10,3;immediate",
            "move_unit;Natasha;9,12",
            "center_cursor;9,10",
            "add_group;ThreeEnemies;ThreeEnemies;immediate",
            "move_group;ThreeEnemies;Starting;no_follow",
            "multi_add_portrait;Natasha;Left;SoldierRed;Right",
            "# (Screen goes to town, there are some soldiers surrounding Natasha)",
            "speak;SoldierRed;Traitor Natasha!{br}Surrender peacefully.|Come quietly, and you may have the chance to explain yourself before His Majesty.",
            "speak;Natasha;Wait, please.{br}You must listen to me!",
            "speak;SoldierRed;Take her.",
            "speak;Natasha;No, you must believe me!|The emperor is not himself. You MUST be able to see that!",
            "speak;SoldierRed;Impugn the emperor at your peril!|We've been ordered to execute you if you offer any resistance.|But your words condemn you!",
            "multi_remove_portrait;Natasha;SoldierRed",
            "end_skip",
            "spawn_group;EnemyTeam;North;Starting;;stack",
            "center_cursor;7,14",
            "add_unit;Eirika;0,16;immediate",
            "add_unit;Seth;0,15;immediate",
            "move_unit;Seth;5,15;no_block",
            "move_unit;Eirika;6,16",
            "flicker_cursor;Seth",
            "multi_add_portrait;Seth;FarLeft;Eirika;MidLeft",
            "speak;Eirika;That cleric is a traitor to the throne of Grado?|What madness is this?",
            "multi_remove_portrait;Seth;Eirika",
            "# (Natasha runs up to Eirika)",
            "move_unit;Natasha;6,15",
            "flicker_cursor;Eirika",
            "multi_add_portrait;Natasha;Left;Eirika;Right",
            "speak;Natasha;Ah...",
            "speak;Eirika;Are you all right?",
            "speak;Natasha;Who are you?",
            "speak;Eirika;I'm from Renais. Why are these Grado men after you?",
            "speak;Natasha;You're from Renais... Oh!|I have something I must tell you. It's about Grado--",
            "speak;Eirika;Wait--Grado soldiers are coming this way.|We'll have to talk later.{br}Now we must fight!",
            "multi_remove_portrait;Natasha;Eirika",
            "transition;Close",
            "move_unit;Eirika;;immediate",
            "move_unit;Natasha;;immediate",
            "remove_unit;Seth;immediate",
            "center_cursor;Eirika;immediate",
            "transition;Open",
            "end_skip",
            "prep;1",
            "# After prep, have Joshua appear",
            "center_cursor;12,6",
            "flicker_cursor;12,6",
            "add_unit;Joshua;12,6",
            "move_unit;Joshua",
            "flicker_cursor;Joshua",
            "add_portrait;Joshua;Right",
            "speak;Joshua;So much for my dreams of making my fortune here...|First the girl, now the gold.{br}It really isn't my lucky day.",
            "add_portrait;SoldierRed;Left",
            "speak;SoldierRed;You there! Mercenary! What are you doing here at the arena?|Get back to the staging area now!",
            "speak;Joshua;C'mon, why don't we both hit the arena?{br}It'll be good training.|If you're going to risk your life anyway, you may as well try to earn some gold.",
            "speak;SoldierRed;I'm reporting you to the captain! You'll be lucky if he just docks your pay!|Don't forget--You can be replaced in an eyeblink, you filthy sellsword!",
            "remove_portrait;SoldierRed",
            "speak;Joshua;Don't worry, little man.{br}I won't forget.|Work's work, but I don't like fighting women...|Now then, what's the rest of the day got in store for me?{w}{clear}...Tails huh? That's nothing but bad luck and more bad luck...",
            "remove_portrait;Joshua",
            "flicker_cursor;Natasha",
            "add_portrait;Natasha;Left",
            "speak;Natasha;They may not want to hear what I have to say, but...|I must speak with one of the Grado soldiers.|Oh, if only one of them will listen to my words...|Please! Grant me strength.",
            "remove_portrait;Natasha",
            "# Now actually start!",
            "add_talk;Natasha;Joshua"
        ],
        "nid": "5 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [],
        "nid": "5 Outro"
    },
    {
        "name": "AddPlaceholder",
        "trigger": "enemy_turn_change",
        "level_nid": "3",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_unit;Placeholder;16,15;immediate"
        ],
        "nid": "3 AddPlaceholder"
    },
    {
        "name": "Dreams of Home",
        "trigger": "on_base_convo",
        "level_nid": "DEBUG",
        "condition": "unit == 'Dreams of Home'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Eirika;Left;Seth;Right",
            "speak;Eirika;I miss home",
            "multi_remove_portrait;Eirika;Seth"
        ],
        "nid": "DEBUG Dreams of Home"
    },
    {
        "name": "Wait",
        "trigger": "unit_wait",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;False",
            "if;True",
            "speak;Joshua;Wow, such wait.",
            "elif;False",
            "speak;Joshua;No",
            "end",
            "end"
        ],
        "nid": "DEBUG Wait"
    },
    {
        "name": "Trigger",
        "trigger": null,
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Eirika;Left",
            "speak;Eirika;This is a test",
            "remove_portrait;Eirika"
        ],
        "nid": "DEBUG Trigger"
    },
    {
        "name": "OnOverworldEnter",
        "trigger": "overworld_start",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "sound;RefreshDance",
            "map_anim;AOE_Mend;Ide (5)",
            "reveal_overworld_node;Ide (5)",
            "wait;500",
            "sound;Mend",
            "reveal_overworld_road;Frelia Castle (2);Ide (5)"
        ],
        "nid": "2 OnOverworldEnter"
    },
    {
        "name": "OnLevelSelect",
        "trigger": "level_select",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "wait;500",
            "move_cursor;Ide (5);2000",
            "toggle_narration_mode;open;1500",
            "wait;500",
            "#add_portrait;Hayden;MidLeft;;;Middle",
            "narrate;Narrator;King Hayden apologizes for being unable to spare soldiers.",
            "remove_portrait;Hayden",
            "toggle_narration_mode;close;1500",
            "overworld_move_unit;Eirika's Group (Eirika);Ide (5);3;FLAG(no_block)",
            "wait;1500",
            "transition;close;1500",
            "wait;500"
        ],
        "nid": "2 OnLevelSelect"
    },
    {
        "name": "0.Persona Change",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;Current_Skills;[u.nid for u in u(\"{unit}\").skills]",
            "    if;'P_' not in \"{Current_Skills}\" and 'S_' not in \"{Current_Skills}\"",
            "        remove_skill;{unit};{Current_Skills};no_banner",
            "    end",
            "endf",
            "choice;CurrentPersona;Change Persona;[s.nid for s in game.get_unit('{unit}').skills if 'P_' in s.nid];;;;;;type_skill;expression;scroll_bar",
            "give_skill;{unit};Persona;no_banner",
            "give_skill;{unit};Persona_Change;no_banner",
            "give_skill;{unit};mapcircleorange;no_banner",
            "if;'{v:CurrentPersona}' == 'P_Jiibayaabooz'",
            "    give_skill;{unit};Magna;no_banner",
            "    give_skill;{unit};Tarunda;no_banner",
            "    give_skill;{unit};Jiibayaabooz_stats;no_banner",
            "    give_skill;{unit};Weak_Fire;no_banner",
            "    change_affinity;{unit};Fool",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Pixie'",
            "    give_skill;{unit};Dia;no_banner",
            "    give_skill;{unit};Zio;no_banner",
            "    give_skill;{unit};Pixie_stats;no_banner",
            "    give_skill;{unit};Weak_Wind;no_banner",
            "    change_affinity;{unit};Lovers",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Angel'",
            "    give_skill;{unit};Garu;no_banner",
            "    give_skill;{unit};Sukukaja;no_banner",
            "    give_skill;{unit};Angel_Stats;no_banner",
            "    give_skill;{unit};Weak_Electric;no_banner",
            "    change_affinity;{unit};Justice",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Mokoi'",
            "    give_skill;{unit};Eiha;no_banner",
            "    give_skill;{unit};Bash;no_banner",
            "    give_skill;{unit};Evil_Touch;no_banner",
            "    give_skill;{unit};Mokoi_Stats;no_banner",
            "    give_skill;{unit};Weak_Fire;no_banner",
            "    change_affinity;{unit};Death",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Nekomata'",
            "    give_skill;{unit};Aqua;no_banner",
            "    give_skill;{unit};Maragi;no_banner",
            "    give_skill;{unit};Rakunda;no_banner",
            "    give_skill;{unit};Nekomata_Stats;no_banner",
            "    give_skill;{unit};Weak_Electric;no_banner",
            "    change_affinity;{unit};Hermit",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Apsaras'",
            "    give_skill;{unit};Bufu;no_banner",
            "    give_skill;{unit};Aqua;no_banner",
            "    give_skill;{unit};Patra;no_banner",
            "    give_skill;{unit};Apsaras_Stats;no_banner",
            "    give_skill;{unit};Weak_Fire;no_banner",
            "    change_affinity;{unit};Priestess",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Ara_Mitama'",
            "    give_skill;{unit};Bash;no_banner",
            "    give_skill;{unit};Balzac_Jordan;no_banner",
            "    give_skill;{unit};Rakukaja;no_banner",
            "    give_skill;{unit};Ara_Mitama_Stats;no_banner",
            "    give_skill;{unit};Weak_Wind;no_banner",
            "    change_affinity;{unit};Chariot",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Forneus'",
            "    give_skill;{unit};Mabufu;no_banner",
            "    give_skill;{unit};Slash;no_banner",
            "    give_skill;{unit};Tarukaja;no_banner",
            "    give_skill;{unit};Forneus_Stats;no_banner",
            "    give_skill;{unit};Weak_Earth",
            "    change_affinity;{unit};Emperor",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Incubus'",
            "    give_skill;{unit};Agi;no_banner",
            "    give_skill;{unit};Life_Drain;no_banner",
            "    give_skill;{unit};Marin_Karin;no_banner",
            "    give_skill;{unit};Incubus_Stats;no_banner",
            "    give_skill;{unit};Weak_Light;no_banner",
            "    change_affinity;{unit};Devil",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Valkyrie'",
            "    give_skill;{unit};Slash;no_banner",
            "    give_skill;{unit};Vacuum_Slash;no_banner",
            "    give_skill;{unit};Kouha;no_banner",
            "    give_skill;{unit};Valkyrie_Stats;no_banner",
            "    give_skill;{unit};Weak_Dark;no_banner",
            "    change_affinity;{unit};Strength",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Jack_Frost'",
            "    give_skill;{unit};Bufula;no_banner",
            "    give_skill;{unit};Mabufu;no_banner",
            "    give_skill;{unit};Pulinpa;no_banner",
            "    give_skill;{unit};Jack_Frost_Stats;no_banner",
            "    give_skill;{unit};Weak_Fire;no_banner",
            "    change_affinity;{unit};Magician",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Slime'",
            "    give_skill;{unit};Bash;no_banner",
            "    give_skill;{unit};Eiha;no_banner",
            "    give_skill;{unit};Evil_Touch;no_banner",
            "    give_skill;{unit};Slime_Stats;no_banner",
            "    give_skill;{unit};Weak_Water;no_banner",
            "    give_skill;{unit};Weak_Light;no_banner",
            "    change_affinity;{unit};Chariot",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Fortuna'",
            "    give_skill;{unit};Magaru;no_banner",
            "    give_skill;{unit};Patra;no_banner",
            "    give_skill;{unit};Lady_Luck;no_banner",
            "    give_skill;{unit};Fortuna_Stats;no_banner",
            "    give_skill;{unit};Weak_Earth;no_banner",
            "    change_affinity;{unit};Fortune",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Berith'",
            "    give_skill;{unit};Maragi;no_banner",
            "    give_skill;{unit};Twin_Shot;no_banner",
            "    give_skill;{unit};MOV+2;no_banner",
            "    give_skill;{unit};Berith_Stats;no_banner",
            "    give_skill;{unit};Weak_Electric;no_banner",
            "    give_skill;{unit};Weak_Light;no_banner",
            "    change_affinity;{unit};Hierophant",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Neko_Shogun'",
            "    give_skill;{unit};Assault_Dive;no_banner",
            "    give_skill;{unit};Rebellion;no_banner",
            "    give_skill;{unit};Regenerate_I;no_banner",
            "    give_skill;{unit};Neko_Shogun_Stats;no_banner",
            "    give_skill;{unit};Weak_Wind;no_banner",
            "    change_affinity;{unit};Star",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Makami'",
            "    give_skill;{unit};Magnara;no_banner",
            "    give_skill;{unit};Agi;no_banner",
            "    give_skill;{unit};Makajam;no_banner",
            "    give_skill;{unit};Makami_Stats;no_banner",
            "    give_skill;{unit};Weak_Ice;no_banner",
            "    give_skill;{unit};Weak_Dark;no_banner",
            "    change_affinity;{unit};Hanged",
            "end"
        ],
        "nid": "Global 0.Persona Change"
    },
    {
        "name": "0. Persona Change Reset",
        "trigger": "unit_wait",
        "level_nid": null,
        "condition": "has_skill(unit, 'Persona_Change')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "reset;{unit}",
            "remove_skill;{unit};Persona_Change;no_banner"
        ],
        "nid": "Global 0. Persona Change Reset"
    },
    {
        "name": "Persona Choice 2",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Jordan'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;'{v:Protag_Level}' == '2'",
            "    game_var;VRoom_Personas;[]",
            "    choice;PersonaChoice;Choose a new persona.;Pixie,Angel,Mokoi",
            "    inc_game_var;Protag_Level",
            "    if;'{v:PersonaChoice}' == 'Pixie'",
            "        give_skill;{unit};P_Pixie;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Exit\"] + [\"Lv. 2: Pixie\"] + [\"Lv. 2: Angel\"] + [\"Lv. 2: Mokoi\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Angel'",
            "        give_skill;{unit};P_Angel;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Exit\"] + [\"Lv. 2: Pixie\"] + [\"Lv. 2: Angel\"] + [\"Lv. 2: Mokoi\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Mokoi'",
            "        give_skill;{unit};P_Mokoi;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Exit\"] + [\"Lv. 2: Pixie\"] + [\"Lv. 2: Angel\"] + [\"Lv. 2: Mokoi\"]",
            "    end",
            "    game_var;Flexibility;+1",
            "    add_lore;Pixie",
            "    add_lore;Angel",
            "    add_lore;Mokoi",
            "    add_lore;Nekomata",
            "    add_lore;Apsaras",
            "    add_lore;Ara_Mitama",
            "    if;len([u.nid for u in u(\"{unit}\").skills if \"P_\" in u.nid]) > 5",
            "        choice;DiscardPersona;Discard Persona;[s.nid for s in game.get_unit('{unit}').skills if 'P_' in s.nid];;;;;;type_skill;expression;scroll_bar",
            "        remove_skill;{unit};{v:DiscardPersona};no_banner",
            "    end",
            "end"
        ],
        "nid": "Global Persona Choice 2"
    },
    {
        "name": "Persona Choice 3",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Jordan'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;'{v:Protag_Level}' == '3'",
            "    choice;PersonaChoice;Choose a new persona.;Nekomata,Apsaras,Ara Mitama",
            "    inc_game_var;Protag_Level",
            "    if;'{v:PersonaChoice}' == 'Nekomata'",
            "        give_skill;{unit};P_Nekomata;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 3: Nekomata\"] + [\"Lv. 3: Apsaras\"] + [\"Lv. 3: Ara Mitama\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Apsaras'",
            "        give_skill;{unit};P_Apsaras;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 3: Nekomata\"] + [\"Lv. 3: Apsaras\"] + [\"Lv. 3: Ara Mitama\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Ara Mitama'",
            "        give_skill;{unit};P_Ara_Mitama;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 3: Nekomata\"] + [\"Lv. 3: Apsaras\"] + [\"Lv. 3: Ara Mitama\"]",
            "    end",
            "    game_var;Flexibility;+1",
            "    add_lore;Forneus",
            "    add_lore;Incubus",
            "    add_lore;Valkyrie",
            "    if;len([u.nid for u in u(\"{unit}\").skills if \"P_\" in u.nid]) > 5",
            "        choice;DiscardPersona;Discard Persona;[s.nid for s in game.get_unit('{unit}').skills if 'P_' in s.nid];;;;;;type_skill;expression;scroll_bar",
            "        remove_skill;{unit};{v:DiscardPersona};no_banner",
            "    end",
            "end"
        ],
        "nid": "Global Persona Choice 3"
    },
    {
        "name": "Persona Choice 4",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Jordan'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;'{v:Protag_Level}' == '4'",
            "    choice;PersonaChoice;Choose a new persona.;Forneus,Incubus,Valkyrie",
            "    inc_game_var;Protag_Level",
            "    if;'{v:PersonaChoice}' == 'Forneus'",
            "        give_skill;{unit};P_Forneus;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 4: Forneus\"] + [\"Lv. 4: Incubus\"] + [\"Lv. 4: Valkyrie\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Incubus'",
            "        give_skill;{unit};P_Incubus;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 4: Forneus\"] + [\"Lv. 4: Incubus\"] + [\"Lv. 4: Valkyrie\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Valkyrie'",
            "        give_skill;{unit};P_Valkyrie;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 4: Forneus\"] + [\"Lv. 4: Incubus\"] + [\"Lv. 4: Valkyrie\"]",
            "    end",
            "    game_var;Flexibility;+1",
            "    add_lore;Jack_Frost",
            "    add_lore;Slime",
            "    add_lore;Fortuna",
            "    if;len([u.nid for u in u(\"{unit}\").skills if \"P_\" in u.nid]) > 5",
            "        choice;DiscardPersona;Discard Persona;[s.nid for s in game.get_unit('{unit}').skills if 'P_' in s.nid];;;;;;type_skill;expression;scroll_bar",
            "        remove_skill;{unit};{v:DiscardPersona};no_banner",
            "    end",
            "end",
            ""
        ],
        "nid": "Global Persona Choice 4"
    },
    {
        "name": "Persona Choice 5",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Jordan'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;'{v:Protag_Level}' == '5'",
            "    choice;PersonaChoice;Choose a new persona.;Jack Frost,Slime,Fortuna",
            "    inc_game_var;Protag_Level",
            "    if;'{v:PersonaChoice}' == 'Jack Frost'",
            "        give_skill;{unit};P_Jack_Frost;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 5: Jack Frost\"] + [\"Lv. 5: Slime\"] + [\"Lv. 5: Fortuna\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Slime'",
            "        give_skill;{unit};P_Slime;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 5: Jack Frost\"] + [\"Lv. 5: Slime\"] + [\"Lv. 5: Fortuna\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Fortuna'",
            "        give_skill;{unit};P_Fortuna;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 5: Jack Frost\"] + [\"Lv. 5: Slime\"] + [\"Lv. 5: Fortuna\"]",
            "    end",
            "    game_var;Flexibility;+1",
            "    if;len([u.nid for u in u(\"{unit}\").skills if \"P_\" in u.nid]) > 5",
            "        choice;DiscardPersona;Discard Persona;[s.nid for s in game.get_unit('{unit}').skills if 'P_' in s.nid];;;;;;type_skill;expression;scroll_bar",
            "        remove_skill;{unit};{v:DiscardPersona};no_banner",
            "    end",
            "end"
        ],
        "nid": "Global Persona Choice 5"
    },
    {
        "name": "Persona Choice 6",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "unit.nid == 'Jordan'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;'{v:Protag_Level}' == '6'",
            "    choice;PersonaChoice;Choose a new persona.;Berith,Neko Shogun,Makami",
            "    inc_game_var;Protag_Level",
            "    if;'{v:PersonaChoice}' == 'Berith'",
            "        give_skill;{unit};P_Berith;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 6: Berith\"] + [\"Lv. 6: Neko Shogun\"] + [\"Lv. 6: Makami\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Neko Shogun'",
            "        give_skill;{unit};P_Neko_Shogun;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 6: Berith\"] + [\"Lv. 6: Neko Shogun\"] + [\"Lv. 6: Makami\"]",
            "    end",
            "    if;'{v:PersonaChoice}' == 'Makami'",
            "        give_skill;{unit};P_Makami;no_banner",
            "        game_var;VRoom_Personas;{v:VRoom_Personas} + [\"Lv. 6: Berith\"] + [\"Lv. 6: Neko Shogun\"] + [\"Lv. 6: Makami\"]",
            "    end",
            "    game_var;Flexibility;+1",
            "    if;len([u.nid for u in u(\"{unit}\").skills if \"P_\" in u.nid]) > 5",
            "        choice;DiscardPersona;Discard Persona;[s.nid for s in game.get_unit('{unit}').skills if 'P_' in s.nid];;;;;;type_skill;expression;scroll_bar",
            "        remove_skill;{unit};{v:DiscardPersona};no_banner",
            "    end",
            "end"
        ],
        "nid": "Global Persona Choice 6"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "Debug",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#debug purposes, delete before playest",
            "inc_game_var;Protag_Level",
            "inc_game_var;Protag_Level",
            "add_lore;Jiibayabooz",
            "give_exp;Jordan;100;silent",
            "give_exp;Jordan;100;silent",
            "give_exp;Jordan;100;silent",
            "give_skill;Jordan;P_Apsaras",
            "give_skill;Jordan;P_Pixie",
            "give_skill;Jordan;P_Angel",
            "# ^^^^^",
            "prep;t;Theme- Arovane;Velvet Room;True;Velvet Room"
        ],
        "nid": "Debug Intro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "1_25_N",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_weather;night",
            "add_weather;snow",
            "set_game_board_bounds;2;2;77;67"
        ],
        "nid": "1_25_N Intro"
    },
    {
        "name": "Event",
        "trigger": "level_start",
        "level_nid": "1_26_V",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Aria of the Soul- Persona 3 Reload",
            "center_cursor;13,13",
            "add_weather;night",
            "transition;open",
            "add_portrait;IgorP;Right;no_block",
            "speak;Old Man;Welcome to the Velvet Room.|Do not be alarmed. You are safely asleep in your world.{w} I have summoned you within your dreams to discuss the terms of your contract.{w} Ah, but first, there are introductions that need to be made.{w} My name is Igor. I am delighted to make your acquaintance.",
            "speak;Igor;This is Butch, my...{w} attendant, so to speak.{w} Should you ever have any questions, he will be here to answer them. ",
            "remove_portrait;IgorP",
            "add_portrait;ButchP;Right;no_block",
            "speak;Butch;...",
            "remove_portrait;ButchP",
            "add_portrait;IgorP;Right;no_block",
            "speak;Igor;Please forgive his poor manners.{w} His circumstances are...{w} unique, to say the least.",
            "remove_portrait;IgorP",
            "add_portrait;ButchP;Right;no_block",
            "speak;Butch;Sorry. It's nice to finally meet you.",
            "remove_portrait;ButchP",
            "add_portrait;IgorP;Right;no_block",
            "speak;Igor;Well then, now that introductions are out of the way,{w} I'm sure you are wondering about where exactly you are.{w} This place exists between dream and reality, mind and matter...|Only those who have signed the contract may enter this room.",
            "remove_portrait;IgorP",
            "add_portrait;ButchP;Right;no_block",
            "speak;Butch;Here it is.",
            "speak;;Butch produced the document you signed at the dorm.;bottom;;narration",
            "speak;Butch;Yeah, sorry about that.{w} Couldn't think of an easier way to get to you.",
            "remove_portrait;ButchP",
            "add_portrait;IgorP;Right;no_block",
            "speak;Igor;From now on, you shall be welcomed here as a guest in the Velvet Room.{w} You are destined to hone your unique ability,{w} and you shall require our assistance to do so.{w} I only require one thing in return.|Abide by the terms of your contract and accept full responsibility for your choices.",
            "remove_portrait;IgorP",
            "add_portrait;Protag (Battle);Right;no_block",
            "choice;VelvetIntro;;...What?, Are you real?, Seems simple enough.;;;bottom_left",
            "remove_portrait;Protag (Battle)",
            "add_portrait;IgorP;Right;no_block",
            "speak;Igor;Take this.",
            "give_item;Jordan;Velvet_Key",
            "speak;Igor;Until we meet again...",
            "remove_portrait;IgorP",
            "transition;close",
            "music_clear",
            "skip_save;t",
            "win_game"
        ],
        "nid": "1_26_V Event"
    },
    {
        "name": "DormEntrance",
        "trigger": "Enter",
        "level_nid": "1_25_N",
        "condition": "region.nid == 'EleanorHall'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "move_unit;Jordan;92,10;immediate;closest",
            "set_game_board_bounds;85;0;99;11",
            "remove_weather;snow",
            "remove_weather;night",
            "center_cursor;Jordan;immediate",
            "music;_buzz ambience",
            "change_music;player_phase;_buzz ambience",
            "transition;open",
            "speak;Desk Worker;Hey there.",
            "move_unit;Jordan;90,4;normal;;100",
            "add_portrait;ButchP;Right;no_block",
            "speak;Desk Worker;You must be the transfer student, eh?{w} Some weather out there.{w} I've got one more thing for you to sign.{w} There's a pen right here.",
            "remove_portrait;ButchP;",
            "transition;close",
            "transition;open",
            "text_entry;ProtagFirstName;First Name?;force_entry",
            "if;not game.game_vars['ProtagFirstName']",
            "    game_var;ProtagFirstName;'Jordan'",
            "end",
            "set_name;Jordan;{v:ProtagFirstName}",
            "transition;close",
            "transition;open",
            "text_entry;ProtagLastName;Last Name?;force_entry",
            "if;not game.game_vars['ProtagLastName']",
            "    game_var;ProtagLastName;Sand",
            "end",
            "add_portrait;ButchP;Right;no_block",
            "speak;Butch;Alright then, you're all set.{w} Here's your room key.{w} Looks like you're in room 206.{w} Have a good time.",
            "remove_portrait;ButchP;"
        ],
        "nid": "1_25_N DormEntrance"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "F1_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# debug",
            "inc_game_var;Protag_Level",
            "inc_game_var;Protag_Level",
            "#give_skill;Jordan;P_Pixie;no_banner",
            "#give_skill;Jordan;P_Jack_Frost;no_banner",
            "#give_exp;Jordan;100;silent",
            "change_party;Lanh;Exploration_Team",
            "change_party;Vernon;Exploration_Team",
            "change_party;John;Exploration_Team",
            "#^^^^^"
        ],
        "nid": "F1_Samir Intro"
    },
    {
        "name": "1.Level_Initiate",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "\"Battle\" in game.level.tags",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "game_var;_convoy;True",
            "trigger_script_with_args;2.Get Party Units;state,alive",
            "for;party_unit;[u for u in {v:all_playable_units}]",
            "    if;game.game_vars.get(u('{party_unit}').nid + '_hp')",
            "        set_current_hp;{party_unit};{e:game.game_vars.get(u('{party_unit}').nid + '_hp')}",
            "    end",
            "endf",
            "for;DeadGuys;[u for u in game.get_units_in_party('DeadGuys')]",
            "    change_party;{DeadGuys};Exploration_Team",
            "    #debug",
            "    if;game.level.nid != 'F4_Samir' and game.level.nid != 'F6_Samir'",
            "    #",
            "    set_current_hp;{DeadGuys};1",
            "    #debug",
            "    end",
            "    #",
            "endf",
            "for;enemy_unit;[u for u in game.level.units if u.team in ['enemy', 'enemy2'] and 'Boss' not in u.tags]",
            "    give_skill;{enemy_unit};mapcirclepurple;no_banner",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Mage'",
            "        change_affinity;{enemy_unit};Magician",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Pegasus_Knight'",
            "        change_affinity;{enemy_unit};Priestess",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Eagle_Knight'",
            "        change_affinity;{enemy_unit};Empress",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Armor'",
            "        change_affinity;{enemy_unit};Emperor",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Cleric'",
            "        change_affinity;{enemy_unit};Hierophant",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Troubador'",
            "        change_affinity;{enemy_unit};Lovers",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Fighter'",
            "        change_affinity;{enemy_unit};Chariot",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Cavalier'",
            "        change_affinity;{enemy_unit};Justice",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Myrmidon'",
            "        change_affinity;{enemy_unit};Hermit",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Mercenary'",
            "        change_affinity;{enemy_unit};Fortune",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Wyvern_Knight'",
            "        change_affinity;{enemy_unit};Strength",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Thief'",
            "        change_affinity;{enemy_unit};Hanged",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Gunman'",
            "        change_affinity;{enemy_unit};Death",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Archer'",
            "        change_affinity;{enemy_unit};Temperance",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Brigand'",
            "        change_affinity;{enemy_unit};Devil",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Soldier' and 'Boss' not in game.get_unit(\"{enemy_unit}\").tags",
            "        change_affinity;{enemy_unit};Tower",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Flagbearer'",
            "        change_affinity;{enemy_unit};Star",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Shaman'",
            "        change_affinity;{enemy_unit};Moon",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Monk'",
            "        change_affinity;{enemy_unit};Sun",
            "    end",
            "    if;game.get_unit(\"{enemy_unit}\").klass == 'Master_Knight'",
            "        change_affinity;{enemy_unit};Judgement",
            "    end",
            "endf",
            "for;other_unit;[u for u in game.level.units if u.team in ['other']]",
            "    give_skill;{other_unit};mapcirclegreen;no_banner",
            "endf"
        ],
        "nid": "Global 1.Level_Initiate"
    },
    {
        "name": "1.Level_End",
        "trigger": "level_end",
        "level_nid": null,
        "condition": "\"Battle\" in game.level.tags",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "trigger_script_with_args;2.Get Party Units;state,alive",
            "for;party_unit;[u for u in {v:all_playable_units}]",
            "    game_var;{e:u('{party_unit}').nid + '_hp'};u('{party_unit}').get_hp()",
            "endf"
        ],
        "nid": "Global 1.Level_End"
    },
    {
        "name": "2.Get Party Units",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#Specify alive for only living units, all to include dead ones",
            "if;'{e:state}' == 'alive'",
            "    lvar;all_playable_units;[u.nid for u in game.get_units_in_party()]",
            "elif;'{e:state}' == 'all'",
            "    lvar;all_playable_units;[u.nid for u in game.get_all_units_in_party()]",
            "end"
        ],
        "nid": "Global 2.Get Party Units"
    },
    {
        "name": "Preps",
        "trigger": "level_start",
        "level_nid": "F2_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# debug purposes, delete before playest",
            "#inc_game_var;Protag_Level",
            "#inc_game_var;Protag_Level",
            "#add_lore;Jiibayabooz",
            "#give_exp;Jordan;100;silent",
            "#give_exp;Jordan;100;silent",
            "#give_exp;Jordan;100;silent",
            "#give_exp;Jordan;100;silent",
            "# ^^^^^",
            "prep;t;Theme- Arovane;Velvet Room;True;Velvet Room",
            "change_team;Marina;player",
            "remove_skill;Marina;mapcirclegreen;no_banner",
            "give_skill;Marina;mapcircleorange;no_banner"
        ],
        "nid": "F2_Samir Preps"
    },
    {
        "name": "EleanorHall_F1",
        "trigger": "Stairs",
        "level_nid": "1_25_N",
        "condition": "region.nid == 'EleanorHallF1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "move_unit;Jordan;91,20;immediate;closest",
            "set_game_board_bounds;85;19;112;34",
            "center_cursor;Jordan;immediate",
            "transition;open",
            "speak;Female Voice;Hey, is that them?",
            "speak;Male Voice;The blizzard must've delayed their flight.{w} We've been waiting for ages...",
            "speak;Deep Voice;Quiet, you two!{w} Don't make us look like weirdos!",
            "speak;Quiet Voice;They'll take one look at you and know YOU'RE a weirdo, Samir.",
            "speak;Samir;Shut up!",
            "move_unit;Jordan;106,23;normal;;100",
            "music;Benzoin Gum - MF DOOM",
            "add_portrait;Samir (Casual);Right;no_block",
            "speak;Samir;Oh, what's up?|You must be the new resident, right?{w} Uhh...{w} {v:ProtagFirstName}, was it?",
            "remove_portrait;Samir (Casual)",
            "add_portrait;Lanh (Casual);Right;no_block",
            "speak;Young Woman;He doesn't even know his only new resident's name...",
            "remove_portrait;Lanh (Casual)",
            "add_portrait;Cynthia (Casual);Right;no_block",
            "speak;Quiet Woman;What a great example you set.{w} Some welcoming committee, huh?",
            "remove_portrait;Cynthia (Casual)",
            "add_portrait;Samir (Casual);Right;no_block",
            "speak;Samir;Just ignore those two. {w} They're nothing but trouble.{w} You are {v:ProtagFirstName} though, right?",
            "remove_portrait;Samir (Casual)",
            "add_portrait;Protag (Casual);Right;no_block",
            "choice;Introduction;;Yep{comma} that's me. It's nice to meet you all.,*nod your head*;;;bottom",
            "remove_portrait;Protag (Casual)",
            "add_portrait;Samir (Casual);Right;no_block",
            "if;'{v:Introduction}' == '*nod your head*'",
            "    speak;Samir;Great, just wanted to make sure.",
            "    remove_portrait;Samir (Casual)",
            "    add_portrait;Lanh (Casual);Right;no_block",
            "    speak;Young Woman;\"Just wanted to make sure.\"{w} Yeah, right.",
            "    remove_portrait;Lanh (Casual)",
            "    add_portrait;Samir (Casual);Right;no_block",
            "else",
            "    speak;Samir;Yeah, you too.",
            "end",
            "speak;Samir;Anyways, welcome to Poplar University.{w} I'm Samir, your RA,|and these are your floormates Lanh, Vernon, and Cynthia.",
            "remove_portrait;Samir (Casual)",
            "add_portrait;Lanh (Casual);Right;no_block",
            "speak;Lanh;Hi, I hope you like it here!",
            "remove_portrait;Lanh (Casual)",
            "add_portrait;Cynthia (Casual);Right;no_block",
            "speak;Cynthia;Since they got assigned to the shittiest dorm here,{w} they probably won't.",
            "remove_portrait;Cynthia (Casual)",
            "add_portrait;Vernon (Casual);Right;no_block",
            "speak;Vernon;It's not that bad here.{w} I actually got some hot water this morning.",
            "remove_portrait;Vernon (Casual)",
            "add_portrait;Samir (Casual);Right;no_block",
            "speak;Samir;Seriously, don't listen to these guys.|I'm sure you'll have a great time here.{w} Anyways, why don't you go get some rest?{w} I bet you're exhausted from all that traveling.{w} I'll be around if you have any questions.",
            "remove_portrait;Samir (Casual)",
            "add_portrait;Vernon (Casual);Right;no_block",
            "speak;Vernon;I think I'm gonna go to bed too.",
            "remove_portrait;Vernon (Casual)",
            "add_portrait;Lanh (Casual);Right;no_block",
            "speak;Lanh;You got big plans for tomorrow or something?",
            "remove_portrait;Lanh (Casual)",
            "add_portrait;Vernon (Casual);Right;no_block",
            "speak;Vernon;You'll see...",
            "remove_portrait;Vernon (Casual)",
            "add_portrait;Samir (Casual);Right;no_block",
            "speak;Samir;Don't do anything stupid.{w} I don't need a repeat of last weekend.{w} Why don't you guys show {v:ProtagFirstName} around campus tomorrow?{w} I'm sure they'd appreciate it.",
            "remove_portrait;Samir (Casual)",
            "add_portrait;Vernon (Casual);Right;no_block",
            "speak;Vernon;That's what I was planning on doing.|I was gonna make it sound more fun, though...",
            "remove_portrait;Vernon (Casual)",
            "add_portrait;Lanh (Casual);Right;no_block",
            "speak;Lanh;I'll come with you guys.{w} I need something to do tomorrow- it gets so dead here on weekends.",
            "remove_portrait;Lanh (Casual)",
            "add_portrait;Vernon (Casual);Right;no_block",
            "speak;Vernon;Sounds like a plan!|Good night, guys!{w} Don't let the bed bugs bite!",
            "remove_portrait;Vernon (Casual)",
            "move_unit;Vernon;86,22;normal;;100;no_follow",
            "add_portrait;Samir (Casual);Right;no_block",
            "speak;Samir;We don't actually have bed bugs here.",
            "remove_portrait;Samir (Casual)",
            "add_portrait;Cynthia (Casual);Right;no_block",
            "speak;Cynthia;That you know of.",
            "remove_portrait;Cynthia (Casual)",
            "add_portrait;Samir (Casual);Right;no_block",
            "speak;Samir;*sigh*|I'll see you tomorrow, okay?|Knock on my door if there's an emergency.",
            "remove_portrait;Samir (Casual)",
            "move_unit;Jordan;103,31;;;100",
            "music_clear",
            "transition;close",
            "skip_save;t",
            "win_game"
        ],
        "nid": "1_25_N EleanorHall_F1"
    },
    {
        "name": "Velvet Room",
        "trigger": null,
        "level_nid": "F2_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "skip_save;t",
            "set_next_chapter;Velvet_Room",
            "game_var;Current_Floor;\"F2_Samir\"",
            "win_game"
        ],
        "nid": "F2_Samir Velvet Room"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "Velvet_Room",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_weather;night",
            "music;Aria of the Soul- Persona 3 Reload",
            "center_cursor;10,11;immediate",
            "add_portrait;IgorP;Right;no_block",
            "speak;Igor;Welcome to the Velvet Room.",
            "remove_portrait;IgorP",
            "trigger_script;Menu"
        ],
        "nid": "Velvet_Room Intro"
    },
    {
        "name": "Summon Persona",
        "trigger": null,
        "level_nid": "Velvet_Room",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;'{v:Summon}' == 'Exit'",
            "    trigger_script;Menu",
            "end",
            "if;'{v:Summon}' == 'Lv. 2: Pixie'",
            "    if;has_skill('Jordan', 'P_Pixie')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Pixie;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 2: Angel'",
            "    if;has_skill('Jordan', 'P_Angel')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Angel;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 2: Mokoi'",
            "    if;has_skill('Jordan', 'P_Mokoi')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Mokoi;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 3: Apsaras'",
            "    if;has_skill('Jordan', 'P_Apsaras')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Apsaras;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 3: Nekomata'",
            "    if;has_skill('Jordan', 'P_Nekomata')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Nekomata;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 3: Ara Mitama'",
            "    if;has_skill('Jordan', 'P_Ara_Mitama')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Ara_Mitama;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 4: Forneus'",
            "    if;has_skill('Jordan', 'P_Forneus')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Forneus;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 4: Incubus'",
            "    if;has_skill('Jordan', 'P_Incubus')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Incubus;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 4: Valkyrie'",
            "    if;has_skill('Jordan', 'P_Valkyrie')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Valkyrie;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 5: Jack Frost'",
            "    if;has_skill('Jordan', 'P_Jack_Frost')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Jack_Frost;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 5: Slime'",
            "    if;has_skill('Jordan', 'P_Slime')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Slime;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 5: Fortuna'",
            "    if;has_skill('Jordan', 'P_Fortuna')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Fortuna;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 6: Berith'",
            "    if;has_skill('Jordan', 'P_Berith')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Berith;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 6: Neko Shogun'",
            "    if;has_skill('Jordan', 'P_Neko_Shogun')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Neko_Shogun;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;'{v:Summon}' == 'Lv. 6: Makami'",
            "    if;has_skill('Jordan', 'P_Makami')",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You already got that Persona.",
            "        remove_portrait;ButchP",
            "        unchoice",
            "    elif;{v:Flexibility} >= 1",
            "        sound;Legendary Weapon",
            "        give_skill;Jordan;P_Makami;no_banner",
            "        game_var;Flexibility;{v:Flexibility} - 1",
            "        unchoice",
            "    else",
            "        add_portrait;ButchP;Right;no_block",
            "        speak;Butch;You don't got enough flexibility to summon that one.",
            "        unchoice",
            "    end",
            "end",
            "if;len([u.nid for u in u(\"Jordan\").skills if \"P_\" in u.nid]) > 5",
            "    speak;;You have too many personas.{w} Please choose one to discard.;;;hint",
            "    choice;DiscardPersona;Discard Persona;[s.nid for s in game.get_unit('Jordan').skills if 'P_' in s.nid];;;;;;type_skill;expression;scroll_bar",
            "    remove_skill;Jordan;{v:DiscardPersona};no_banner",
            "    unchoice",
            "else",
            "    unchoice",
            "end"
        ],
        "nid": "Velvet_Room Summon Persona"
    },
    {
        "name": "Menu",
        "trigger": null,
        "level_nid": "Velvet_Room",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "choice;start;What would you like to do?;Summon Persona,Guide,Exit;;;left",
            "if;'{v:start}' == 'Exit'",
            "    set_next_chapter;{v:Current_Floor}",
            "    skip_save;t",
            "    win_game",
            "end",
            "if;'{v:start}' == 'Guide'",
            "    open_library",
            "    trigger_script;Velvet_Room Menu",
            "end",
            "if;'{v:start}' == 'Summon Persona'",
            "    textbox;Flexibility;\"<icon>Flexibility</>\" + str({v:Flexibility});top_right;75;expression",
            "    choice;Summon;Summon Persona;{v:VRoom_Personas};;;left;;Summon Persona;;7,1;expression;",
            "end"
        ],
        "nid": "Velvet_Room Menu"
    },
    {
        "name": "Outro",
        "trigger": "Next Floor",
        "level_nid": "F1_Samir",
        "condition": "region.nid == 'NextFloor'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "win_game"
        ],
        "nid": "F1_Samir Outro"
    },
    {
        "name": "Chest1",
        "trigger": "Unlock",
        "level_nid": "F1_Samir",
        "condition": "region.nid == 'Chest1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "sound;Unlock",
            "show_layer;Chest1",
            "give_item;{unit};Bandage",
            "has_attacked;{unit}"
        ],
        "nid": "F1_Samir Chest1"
    },
    {
        "name": "Chest2",
        "trigger": "Unlock",
        "level_nid": "F1_Samir",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "sound;Unlock",
            "show_layer;Chest2",
            "give_money;15",
            "has_attacked;{unit}"
        ],
        "nid": "F1_Samir Chest2"
    },
    {
        "name": "Soldier_Charge",
        "trigger": "unit_death",
        "level_nid": "F1_Samir",
        "condition": "unit.nid == '108'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_ai;110;Charge"
        ],
        "nid": "F1_Samir Soldier_Charge"
    },
    {
        "name": "1.Player Death",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.team == 'player' and unit.nid != 'Jordan'",
            "    sound;Death",
            "    remove_unit;{unit};fade;fade",
            "    resurrect;{unit}",
            "    change_party;{unit};DeadGuys",
            "end"
        ],
        "nid": "Global 1.Player Death"
    },
    {
        "name": "Walls",
        "trigger": "unit_death",
        "level_nid": "F3_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.nid== 'Wall1'",
            "sound;VillageDestroyed",
            "map_anim;Snag;8,0",
            "show_layer;NorthWall",
            "end",
            "if;unit.nid== 'Wall2'",
            "sound;VillageDestroyed",
            "map_anim;Snag;9,10",
            "show_layer;SouthWall",
            "end"
        ],
        "nid": "F3_Samir Walls"
    },
    {
        "name": "Unlock",
        "trigger": "Unlock",
        "level_nid": "F4_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;region.nid == 'Door1'",
            "sound;Unlock",
            "show_layer;Door1",
            "has_attacked;{unit}",
            "end",
            "if;region.nid == 'Door2'",
            "sound;Unlock",
            "show_layer;Door2",
            "has_attacked;{unit}",
            "end",
            "if;region.nid == 'Chest'",
            "sound;Unlock",
            "show_layer;Chest",
            "give_item;{unit};Goddess_Icon",
            "has_attacked;{unit}",
            "end"
        ],
        "nid": "F4_Samir Unlock"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "F3_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "prep;t;Theme- Arovane;Velvet Room;True;Velvet Room"
        ],
        "nid": "F3_Samir Intro"
    },
    {
        "name": "Velvet Room",
        "trigger": null,
        "level_nid": "F3_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "skip_save;t",
            "set_next_chapter;Velvet_Room",
            "game_var;Current_Floor;\"F3_Samir\"",
            "win_game"
        ],
        "nid": "F3_Samir Velvet Room"
    },
    {
        "name": "Debug",
        "trigger": "unit_wait",
        "level_nid": "F2_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#if;region.nid == 'Debug'",
            "#win_game",
            "#end"
        ],
        "nid": "F2_Samir Debug"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "F4_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#debug",
            "set_current_mana;Lanh;999",
            "set_current_mana;Marina;999",
            "#",
            "prep;t;Theme- Arovane;Velvet Room;True;Velvet Room"
        ],
        "nid": "F4_Samir Intro"
    },
    {
        "name": "Velvet Room",
        "trigger": null,
        "level_nid": "F4_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "skip_save;t",
            "set_next_chapter;Velvet_Room",
            "game_var;Current_Floor;\"F4_Samir\"",
            "win_game"
        ],
        "nid": "F4_Samir Velvet Room"
    },
    {
        "name": "Outro",
        "trigger": "Next Floor",
        "level_nid": "F2_Samir",
        "condition": "region.nid == 'NextFloor'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "win_game"
        ],
        "nid": "F2_Samir Outro"
    },
    {
        "name": "Outro",
        "trigger": "Next Floor",
        "level_nid": "F3_Samir",
        "condition": "region.nid == 'NextFloor'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#debug",
            "speak;;There will now be a full HP/SP heal to simulate leaving the dungeon and coming back a different day.{w} The next heal will be after floor 5.{w} Now is a good time to take a break if you're getting tired or bored :);;;hint",
            "for;PARTY_UNIT;[u.nid for u in game.get_all_units_in_party()]",
            "set_current_hp;{PARTY_UNIT};{e:u('{PARTY_UNIT}').get_max_hp()}",
            "set_current_mana;{PARTY_UNIT};{e:u('{PARTY_UNIT}').get_max_mana()}",
            "endf",
            "for;PARTY_UNIT;[u.nid for u in game.get_all_units_in_party('DeadGuys')]",
            "set_current_hp;{PARTY_UNIT};{e:u('{PARTY_UNIT}').get_max_hp()}",
            "set_current_mana;{PARTY_UNIT};{e:u('{PARTY_UNIT}').get_max_mana()}",
            "endf",
            "#",
            "music_clear",
            "win_game"
        ],
        "nid": "F3_Samir Outro"
    },
    {
        "name": "Outro",
        "trigger": "Next Floor",
        "level_nid": "F4_Samir",
        "condition": "region.nid == 'NextFloor'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "win_game"
        ],
        "nid": "F4_Samir Outro"
    },
    {
        "name": "New Event",
        "trigger": "level_start",
        "level_nid": "FEE3Intro",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_weather;night",
            "music;Aria of the Soul- Persona 3 Reload",
            "center_cursor;IgorP",
            "transition;open",
            "add_portrait;IgorP;Right",
            "speak;Igor;Ah, it seems we have some visitors tonight.|Tell me, Butch, have the preparations been made?",
            "remove_portrait;IgorP",
            "add_portrait;ButchP;Right",
            "speak;Butch;Just finished up, boss.|You sure we should be showing them this, though?",
            "remove_portrait;ButchP",
            "add_portrait;IgorP;Right",
            "speak;Igor;I am quite sure.{w} Our new guest has quite the journey ahead of them,{w} and they shall need all the help they can get.{w} Now, guests, please sit back and enjoy the show.{w} I'm sure you shall find it most entertaining...",
            "remove_portrait;IgorP",
            "transition;close"
        ],
        "nid": "FEE3Intro New Event"
    },
    {
        "name": "New Event",
        "trigger": "level_start",
        "level_nid": "FEE3Clip",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_talk;Jordan;Vernon",
            "add_talk;Jordan;101",
            "add_weather;snow"
        ],
        "nid": "FEE3Clip New Event"
    },
    {
        "name": "New Event_1",
        "trigger": "on_talk",
        "level_nid": "FEE3Clip",
        "condition": "check_pair('Jordan', 'Vernon')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Vernon (Casual);Right",
            "speak;Vernon;What's up, Jordan?{w} Ready to head to class?{w} I'm freezing my butt off out here..."
        ],
        "nid": "FEE3Clip New Event_1"
    },
    {
        "name": "New Event_2",
        "trigger": "on_talk",
        "level_nid": "FEE3Clip",
        "condition": "check_pair('Jordan', '101')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "speak;Chilly Student;I can't wait for winter to end...{w} Is it always this cold here?{w} Maybe I need to transfer..."
        ],
        "nid": "FEE3Clip New Event_2"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "F5_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "prep;t;Theme- Arovane;Velvet Room;True;Velvet Room"
        ],
        "nid": "F5_Samir Intro"
    },
    {
        "name": "Velvet Room",
        "trigger": "Next Floor",
        "level_nid": "F5_Samir",
        "condition": "",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "skip_save;t",
            "set_next_chapter;Velvet_Room",
            "game_var;Current_Floor;\"F5_Samir\"",
            "win_game"
        ],
        "nid": "F5_Samir Velvet Room"
    },
    {
        "name": "Velvet Room",
        "trigger": null,
        "level_nid": "F6_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "skip_save;t",
            "set_next_chapter;Velvet_Room",
            "game_var;Current_Floor;\"F6_Samir\"",
            "win_game"
        ],
        "nid": "F6_Samir Velvet Room"
    },
    {
        "name": "Outro",
        "trigger": "Next Floor",
        "level_nid": "F5_Samir",
        "condition": "region.nid == 'NextFloor'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "#debug",
            "speak;;There will now be a full HP/SP heal to simulate leaving the dungeon and coming back a different day.{w} This is the last heal for this demo.{w} There are 2 floors left, the last being a boss floor. {w} Now is a good time to take a break if you're getting tired or bored :);;;hint",
            "for;PARTY_UNIT;[u.nid for u in game.get_all_units_in_party()]",
            "set_current_hp;{PARTY_UNIT};{e:u('{PARTY_UNIT}').get_max_hp()}",
            "set_current_mana;{PARTY_UNIT};{e:u('{PARTY_UNIT}').get_max_mana()}",
            "endf",
            "#",
            "music_clear",
            "win_game"
        ],
        "nid": "F5_Samir Outro"
    },
    {
        "name": "Outro",
        "trigger": "Next Floor",
        "level_nid": "F6_Samir",
        "condition": "region.nid == 'NextFloor'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "win_game"
        ],
        "nid": "F6_Samir Outro"
    },
    {
        "name": "Unlock",
        "trigger": "Unlock",
        "level_nid": "F5_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;region.nid =='Door1'",
            "    show_layer;Door1",
            "end",
            "if;region.nid =='Door2'",
            "    show_layer;Door2",
            "end",
            "if;region.nid == 'Chest1'",
            "    sound;Unlock",
            "    show_layer;Chest1",
            "    give_item;{unit};Six_Shooter",
            "    has_attacked;{unit}",
            "end",
            "if;region.nid == 'Chest2'",
            "    sound;Unlock",
            "    show_layer;Chest2",
            "    give_item;{unit};Soul_Drop",
            "    has_attacked;{unit}",
            "end",
            "if;region.nid == 'Chest3'",
            "    sound;Unlock",
            "    show_layer;Chest3",
            "    give_item;{unit};Secret_Book",
            "    has_attacked;{unit}",
            "end"
        ],
        "nid": "F5_Samir Unlock"
    },
    {
        "name": "Wall",
        "trigger": "unit_death",
        "level_nid": "F5_Samir",
        "condition": "unit.nid == 'Wall1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.nid== 'Wall1'",
            "    sound;VillageDestroyed",
            "    map_anim;Snag;6,9",
            "    show_layer;Wall",
            "end"
        ],
        "nid": "F5_Samir Wall"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "F6_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "prep;t;Theme- Arovane;Velvet Room;True;Velvet Room",
            "game_var;F6_Switches;0",
            "game_var;f6_bridge;0"
        ],
        "nid": "F6_Samir Intro"
    },
    {
        "name": "Switches",
        "trigger": "Switch",
        "level_nid": "F6_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;region.nid == 'Switch_1'",
            "sound;Weapon Push",
            "game_var;F6_Switches;{v:F6_Switches} + 1",
            "has_attacked;{unit}",
            "end",
            "if;region.nid == 'Switch_2'",
            "sound;Weapon Push",
            "game_var;F6_Switches;{v:F6_Switches} + 1",
            "has_attacked;{unit}",
            "end"
        ],
        "nid": "F6_Samir Switches"
    },
    {
        "name": "Bridge",
        "trigger": "unit_wait",
        "level_nid": "F6_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:F6_Switches} == 2 and {v:f6_bridge} != 1",
            "center_cursor;7,8",
            "screen_shake;0",
            "map_anim;Snag;6,9;no_block",
            "map_anim;Snag;6,8;no_block",
            "map_anim;Snag;6,7;no_block",
            "map_anim;Snag;6,6;no_block",
            "map_anim;Snag;7,9;no_block",
            "map_anim;Snag;7,8;no_block",
            "map_anim;Snag;7,7;no_block",
            "map_anim;Snag;8,9;no_block",
            "map_anim;Snag;8,8;no_block",
            "map_anim;Snag;8,7;no_block",
            "map_anim;Snag;9,9;no_block",
            "map_anim;Snag;9,8;no_block",
            "map_anim;Snag;9,7;no_block",
            "sound;VillageDestroyed",
            "show_layer;bridge;fade",
            "screen_shake_end",
            "game_var;f6_bridge;1",
            "end"
        ],
        "nid": "F6_Samir Bridge"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "F7_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "prep;t;Battle -Awakening- - Megami Ibunroku Persona;Velvet Room;True;Velvet Room",
            "game_var;brandon_minions;0",
            "game_var;brandon_spirits;0",
            "game_var;spirit_spawn;0",
            "#debug",
            "kill_unit;101",
            "kill_unit;102",
            "#"
        ],
        "nid": "F7_Samir Intro"
    },
    {
        "name": "Velvet Room",
        "trigger": null,
        "level_nid": "Debug",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "skip_save;t",
            "set_next_chapter;Velvet_Room",
            "game_var;Current_Floor;\"Debug\"",
            "win_game"
        ],
        "nid": "Debug Velvet Room"
    },
    {
        "name": "Rein",
        "trigger": "turn_change",
        "level_nid": "F2_Samir",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "spawn_group;Rein;north;Rein;warp;closest",
            "wait;1000"
        ],
        "nid": "F2_Samir Rein"
    },
    {
        "name": "Rein",
        "trigger": "turn_change",
        "level_nid": "F3_Samir",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "spawn_group;Rein;west;Rein;warp;closest",
            "wait;1000"
        ],
        "nid": "F3_Samir Rein"
    },
    {
        "name": "Charge",
        "trigger": "unit_death",
        "level_nid": "F4_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.nid == '109'",
            "    change_ai;112;Charge",
            "end",
            "if;unit.nid == '112'",
            "    change_ai;114;Charge",
            "end"
        ],
        "nid": "F4_Samir Charge"
    },
    {
        "name": "Rein",
        "trigger": "turn_change",
        "level_nid": "F4_Samir",
        "condition": "game.turncount == 10",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "spawn_group;Rein;south;Rein;warp;closest",
            "wait;1000"
        ],
        "nid": "F4_Samir Rein"
    },
    {
        "name": "Charge",
        "trigger": "unit_death",
        "level_nid": "F5_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.nid == '103'",
            "    change_ai;114;Charge",
            "    change_ai;116;Charge",
            "end"
        ],
        "nid": "F5_Samir Charge"
    },
    {
        "name": "Rein",
        "trigger": "turn_change",
        "level_nid": "F5_Samir",
        "condition": "game.turncount== 10",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "spawn_group;Rein;south;Rein;warp;closest",
            "wait;1000"
        ],
        "nid": "F5_Samir Rein"
    },
    {
        "name": "Rein",
        "trigger": "turn_change",
        "level_nid": "F6_Samir",
        "condition": "game.turncount == 10",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "spawn_group;Rein;south;Rein;warp;closest",
            "wait;1000"
        ],
        "nid": "F6_Samir Rein"
    },
    {
        "name": "Velvet Room",
        "trigger": null,
        "level_nid": "F7_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "skip_save;t",
            "set_next_chapter;Velvet_Room",
            "game_var;Current_Floor;\"F7_Samir\"",
            "win_game"
        ],
        "nid": "F7_Samir Velvet Room"
    },
    {
        "name": "Minions Dead",
        "trigger": "unit_death",
        "level_nid": "F7_Samir",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.nid == '101'",
            "    inc_game_var;brandon_minions",
            "end",
            "if;unit.nid == '102'",
            "    inc_game_var;brandon_minions",
            "end",
            "if;'{v:brandon_minions}' == '2'",
            "    flicker_cursor;Brandon",
            "    remove_item;Brandon;Departed_Arrow",
            "    game_var;brandon_minions;0",
            "end"
        ],
        "nid": "F7_Samir Minions Dead"
    },
    {
        "name": "Spirits",
        "trigger": "turn_change",
        "level_nid": "F7_Samir",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "spawn_group;Spirits;south;Spirits;warp;closest",
            "",
            ""
        ],
        "nid": "F7_Samir Spirits"
    },
    {
        "name": "Spirits 2",
        "trigger": "turn_change",
        "level_nid": "F7_Samir",
        "condition": "game.turncount == 7",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "spawn_group;Spirits2;south;Spirits2;warp;closest",
            ""
        ],
        "nid": "F7_Samir Spirits 2"
    },
    {
        "name": "Spirits 3",
        "trigger": "turn_change",
        "level_nid": "F7_Samir",
        "condition": "game.turncount == 9",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "spawn_group;Spirits3;south;Spirits3;warp;closest",
            ""
        ],
        "nid": "F7_Samir Spirits 3"
    },
    {
        "name": "Outro",
        "trigger": "unit_death",
        "level_nid": "F7_Samir",
        "condition": "unit.nid == 'Brandon'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music_clear",
            "win_game"
        ],
        "nid": "F7_Samir Outro"
    }
]