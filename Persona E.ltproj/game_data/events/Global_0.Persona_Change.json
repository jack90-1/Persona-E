[
    {
        "name": "0.Persona Change",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;Current_Skills;[u.nid for u in u(\"{unit}\").skills]",
            "    if;'P_' not in \"{Current_Skills}\" and 'S_' not in \"{Current_Skills}\"",
            "        remove_skill;{unit};{Current_Skills};no_banner",
            "    end",
            "endf",
            "choice;CurrentPersona;Change Persona;[s.nid for s in game.get_unit('{unit}').skills if 'P_' in s.nid];;;;;;type_skill;expression",
            "give_skill;{unit};Persona;no_banner",
            "give_skill;{unit};Persona_Change;no_banner",
            "give_skill;{unit};mapcircleorange;no_banner",
            "if;'{v:CurrentPersona}' == 'P_Jiibayaabooz'",
            "    give_skill;{unit};Magna;no_banner",
            "    give_skill;{unit};Tarunda;no_banner",
            "    give_skill;{unit};Jiibayaabooz_stats;no_banner",
            "    change_affinity;{unit};Fool",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Pixie'",
            "    give_skill;{unit};Dia;no_banner",
            "    give_skill;{unit};Zio;no_banner",
            "    give_skill;{unit};Pixie_stats;no_banner",
            "    change_affinity;{unit};Lovers",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Angel'",
            "    give_skill;{unit};Garu;no_banner",
            "    give_skill;{unit};Sukukaja;no_banner",
            "    give_skill;{unit};Angel_Stats;no_banner",
            "    change_affinity;{unit};Justice",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Mokoi'",
            "    give_skill;{unit};Eiha;no_banner",
            "    give_skill;{unit};Bash;no_banner",
            "    give_skill;{unit};Evil_Touch;no_banner",
            "    give_skill;{unit};Mokoi_Stats;no_banner",
            "    change_affinity;{unit};Death",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Nekomata'",
            "    give_skill;{unit};Aqua;no_banner",
            "    give_skill;{unit};Maragi;no_banner",
            "    give_skill;{unit};Rakunda;no_banner",
            "    give_skill;{unit};Nekomata_Stats;no_banner",
            "    change_affinity;{unit};Hermit",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Apsaras'",
            "    give_skill;{unit};Bufu;no_banner",
            "    give_skill;{unit};Aqua;no_banner",
            "    give_skill;{unit};Patra;no_banner",
            "    give_skill;{unit};Apsaras_Stats;no_banner",
            "    change_affinity;{unit};Priestess",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Ara_Mitama'",
            "    give_skill;{unit};Bash;no_banner",
            "    give_skill;{unit};Provoke;no_banner",
            "    give_skill;{unit};Rakukaja;no_banner",
            "    give_skill;{unit};Ara_Mitama_Stats;no_banner",
            "    change_affinity;{unit};Chariot",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Forneus'",
            "    give_skill;{unit};Mabufu;no_banner",
            "    give_skill;{unit};Slash;no_banner",
            "    give_skill;{unit};Tarukaja;no_banner",
            "    give_skill;{unit};Forneus_Stats;no_banner",
            "    change_affinity;{unit};Emperor",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Incubus'",
            "    give_skill;{unit};Agi;no_banner",
            "    give_skill;{unit};Life_Drain;no_banner",
            "    give_skill;{unit};Marin_Karin;no_banner",
            "    give_skill;{unit};Incubus_Stats;no_banner",
            "    change_affinity;{unit};Devil",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Valkyrie'",
            "    give_skill;{unit};Slash;no_banner",
            "    give_skill;{unit};Vacuum_Slash;no_banner",
            "    give_skill;{unit};Kouha;no_banner",
            "    give_skill;{unit};Valkyrie_Stats;no_banner",
            "    change_affinity;{unit};Strength",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Jack_Frost'",
            "    give_skill;{unit};Bufula;no_banner",
            "    give_skill;{unit};Mabufu;no_banner",
            "    give_skill;{unit};Pulinpa;no_banner",
            "    give_skill;{unit};Jack_Frost_Stats;no_banner",
            "    change_affinity;{unit};Magician",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Slime'",
            "    give_skill;{unit};Bash;no_banner",
            "    give_skill;{unit};Eiha;no_banner",
            "    give_skill;{unit};Evil_Touch;no_banner",
            "    give_skill;{unit};Slime_Stats;no_banner",
            "    change_affinity;{unit};Chariot",
            "end",
            "if;'{v:CurrentPersona}' == 'P_Fortuna'",
            "    give_skill;{unit};Magaru;no_banner",
            "    give_skill;{unit};Patra;no_banner",
            "    give_skill;{unit};Lady_Luck;no_banner",
            "    give_skill;{unit};Fortuna_Stats;no_banner",
            "    change_affinity;{unit};Fortune",
            "end"
        ],
        "nid": "Global 0.Persona Change"
    }
]